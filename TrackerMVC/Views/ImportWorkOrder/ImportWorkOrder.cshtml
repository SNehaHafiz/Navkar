@{
    ViewBag.Title = "ImportWorkOrder";
    Layout = "~/Views/Shared/_LayoutDashboard.cshtml";
}
<div class=" content-area" id="divWorkOrder">
    <div class="page-header">
        <h4 class="page-title">Generate Work Order (Import) </h4>
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a onclick="OpenWOSummary();" class="btn btn-primary btn-success text-right" style="align-content:center;color:white"><i class="fa fa-file-text" data-placement="bottom" title="Open Work Order Summary"></i> </a>
            </li>
        </ol>
    </div>
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <div class="form-horizontal">
                        <div class="row">
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label mandatory">WO No</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.TextBox("txtWorkOrder", null, new { @class = "form-control", @id = "txtWorkOrder", name = "txtWorkOrder", disabled = "disabled", autocomplete = "off", placeholder = "NEW", @Value = ViewBag.WONO })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-lg-3">
                                @*<div class="input-group">*@
                                <div class="form-group label-floating">
                                    <label class="form-label mandatory">WO Date</label>
                                    @Html.TextBox("txtWODate", null, new { @class = "form-control  form_datetime1 ", @id = "txtWODate", name = "txtWODate", Value = DateTime.Now.ToString("dd MMM yyyy HH:mm"), autocomplete = "off", @maxlength = 100 })
                                </div>
                                @*</div>*@
                            </div>
                            <div class="col-sm-12 col-lg-3">
                                <div class="form-group label-floating">
                                    <label class="form-label">Category</label>
                                    @*@Html.TextBox("txtOrigin", null, new { @class = "form-control", @id = "txtOrigin", name = "txtOrigin", autocomplete = "off", rows = "2", @maxlength = 500 })*@
                                    @Html.DropDownList("ddlCategory", new List<SelectListItem>
                                         { new SelectListItem { Text = "Import", Value = "Import"},
                                             new SelectListItem { Text = "Import LCL", Value = "Import LCL"},
                                           new SelectListItem { Text = "Bond", Value = "Bond"},
                                           new SelectListItem { Text = "Import DPD", Value = "DPD"},
                                           }, new { @class = "form-control", autocomplete = "off", @id = "ddlCategory" })
                                </div>
                            </div>
                            <div class="col-sm-12 col-lg-3">
                                <div class="form-group label-floating">
                                    <label class="form-label">WO Type</label>
                                    @*@Html.TextBox("txtOrigin", null, new { @class = "form-control", @id = "txtOrigin", name = "txtOrigin", autocomplete = "off", rows = "2", @maxlength = 500 })*@
                                    @Html.DropDownList("ddlWOType", (IEnumerable<SelectListItem>)ViewBag.WOType, "--Select--", new { @class = "form-control", @id = "ddlWOType", name = "ddlWOType", autocomplete = "off", onchange = "ChangeWOType()" })
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label mandatory">Container No</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.TextBox("txtContainerNo", null, new { @class = "form-control", @id = "txtContainerNo", name = "txtContainerNo", autocomplete = "off", placeholder = "Container No", @maxlength = 11 })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-1 col-sm-12">
                                <div class="form-group" style="padding-top:25px">
                                    @*<label class="form-label" style="visibility:hidden">.</label>*@
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            <button class="btn btn-primary" type="button" id="btnAddContainerNo" name="Add" onclick="BlurCOntainerNo()"><i class="fa fa-check"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-2 col-sm-12" id="divTruckNo" style="display:none">
                                <div class="form-group">
                                    <label class="form-label mandatory">Truck No</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.TextBox("txtTruckNo", null, new { @class = "form-control", @id = "txtTruckNo", name = "txtTruckNo", autocomplete = "off", placeholder = "Truck No", @maxlength = 11 })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-1 col-sm-12" id="divTruckNoAdd" style="display:none">
                                <div class="form-group" style="padding-top:25px">
                                    @*<label class="form-label" style="visibility:hidden">.</label>*@
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            <button class="btn btn-primary" type="button" id="btnAddTruckNo" name="Add" onclick="BlurTruckNo()"><i class="fa fa-check"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-2 col-sm-12" id="divBOE" style="display:none">
                                <div class="form-group">
                                    <label class="form-label mandatory">BOE No</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.TextBox("txtBoe", null, new { @class = "form-control", @id = "txtboe", name = "txtboe", autocomplete = "off", placeholder = "BOE No", @maxlength = 11 })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-1 col-sm-12" id="divBOEAdd" style="display:none">
                                <div class="form-group" style="padding-top:25px">
                                    @*<label class="form-label" style="visibility:hidden">.</label>*@
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            <button class="btn btn-primary" type="button" id="btnAddTruckNo" name="Add" onclick="FocusBoe()"><i class="fa fa-check"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12 col-sm-12">
                                <b>CHA :</b><label id="lblCHAName"></label>
                                <label id="lblCHAID" style="display:none"></label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12 col-sm-12">
                                <b>Importer Name :</b><label id="lblImporterName"></label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12 col-sm-12">
                                <b>On Account :</b><label id="lblOnAccountName"></label>
                                <label id="lblOnAccountID" style="display:none"></label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12 col-sm-12">
                                <b>Manifest Qty :</b><label id="lblManiFestQty"></label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12 col-sm-12">
                                <b>Cargo Description :</b><label id="lblCargoDescription"></label>
                                <label id="lblSBEntryID" style="display:none"></label>
                                <label id="lblTotStuffPkgs" style="display:none"></label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-10 col-sm-10"></div>
                            <div class="col-lg-2 col-sm-2 float-right">
                                <b>Unit Weight :</b><label id="lblUnitWt"></label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-10 col-sm-10"></div>
                            <div class="col-lg-2 col-sm-2 float-right">
                                <b>Previous Pkgs :</b><label id="lblPrevPkgs"></label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-10 col-sm-10"></div>
                            <div class="col-lg-2 col-sm-2 float-right">
                                <b>Cont. Previous Pkgs :</b><label id="lblContPrevPkgs"></label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12 col-lg-2">
                                <div class="form-group label-floating">
                                    <label class="form-label">IGM No</label>
                                    @Html.TextBox("txtIGMNo", null, new { @class = "form-control", @disabled = "disabled", @id = "txtIGMNo", name = "txtIGMNo", autocomplete = "off", placeholder = "IGM No" })
                                </div>
                                <div class="form-group label-floating">
                                    <label class="form-label">Jo No</label>
                                    @Html.TextBox("txtJoNo", null, new { @class = "form-control", @disabled = "disabled", @id = "txtJoNo", name = "txtJoNo", autocomplete = "off", placeholder = "Jo No" })
                                </div>
                            </div>
                            <div class="col-sm-12 col-lg-2">
                                <div class="form-group label-floating">
                                    <label class="form-label">Total Pkgs</label>
                                    @Html.TextBox("txtTotalPkgs", null, new { @class = "form-control", @disabled = "disabled", @id = "txtTotalPkgs", name = "txtTotalPkgs", autocomplete = "off", placeholder = "Total Pkgs" })
                                </div>
                            </div>
                            <div class="col-sm-12 col-lg-2">
                                <div class="form-group label-floating">
                                    <label class="form-label">Total Weight</label>
                                    @Html.TextBox("txtTotalWeight", null, new { @class = "form-control", @disabled = "disabled", @id = "txtTotalWeight", name = "txtTotalWeight", autocomplete = "off", placeholder = "Total Weight" })
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12 col-lg-2">
                                <div class="form-group label-floating">
                                    <label class="form-label">Pkgs</label>
                                    @Html.TextBox("txtStuffDStuffPkgs", null, new { @class = "form-control", @id = "txtStuffDStuffPkgs", name = "txtStuffDStuffPkgs", autocomplete = "off", placeholder = "Pkgs" })
                                </div>
                            </div>
                            <div class="col-sm-12 col-lg-2">
                                <div class="form-group label-floating">
                                    <label class="form-label">Weight</label>
                                    @Html.TextBox("txtWeight", null, new { @class = "form-control", @id = "txtWeight", name = "txtWeight", autocomplete = "off", placeholder = "Weight" })
                                </div>
                            </div>
                            <div class="col-sm-12 col-lg-3">
                                <div class="form-group label-floating">
                                    <label class="form-label">Vendor Name</label>
                                    @*@Html.TextBox("txtOrigin", null, new { @class = "form-control", @id = "txtOrigin", name = "txtOrigin", autocomplete = "off", rows = "2", @maxlength = 500 })*@
                                    @Html.DropDownList("ddlVendor", (IEnumerable<SelectListItem>)ViewBag.VendorList, "--Select--", new { @class = "form-control", @id = "ddlVendor", name = "ddlVendor", autocomplete = "off" })
                                    <input type="hidden" id="hdnVendorId" />
                                </div>
                            </div>
                            <div class="col-sm-12 col-lg-3">
                                <div class="form-group label-floating">
                                    <label class="form-label">Equipment Type</label>
                                    @*@Html.TextBox("txtOrigin", null, new { @class = "form-control", @id = "txtOrigin", name = "txtOrigin", autocomplete = "off", rows = "2", @maxlength = 500 })*@
                                    @Html.DropDownList("ddlEQType", (IEnumerable<SelectListItem>)ViewBag.EQType, "--Select--", new { @class = "form-control", @id = "ddlEQType", name = "ddlEQType", autocomplete = "off" })
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label mandatory">Remarks</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.TextBox("txtRemarks", null, new { @class = "form-control", @id = "txtRemarks", name = "txtRemarks", rows = "2", textmode = "MultiLine", autocomplete = "off", placeholder = "Remarks", @Value = ViewBag.Remarks })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-1 col-sm-12">
                                <div class="form-group" style="padding-top:25px">
                                    @*<label class="form-label" style="visibility:hidden">.</label>*@
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            <button class="btn btn-primary" type="button" id="btnAdd" name="Add" onclick="ShowWorkOrderList()">Add</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12 col-sm-12">
                                <div class="table-responsive">
                                    <table class="table table-bordered table-hover tbl-cart text-nowrap" id="tblWorkOrderDets">
                                        <thead>
                                            <tr>
                                                <th class="wd-15p sorting"></th>
                                                <th class="wd-15p sorting">Container No</th>
                                                <th class="wd-15p sorting">Pkgs</th>
                                                <th class="wd-15p sorting">Weight</th>
                                                <th class="wd-15p sorting">Vendor</th>
                                                <th class="wd-15p sorting">Equipment Type</th>
                                                <th class="wd-15p sorting">Remarks</th>
                                                <th class="wd-10p sorting" style="display:none">EQID</th>
                                                <th class="wd-10p sorting" style="display:none">VendorID</th>
                                                <th class="wd-10p sorting" style="display:none">SBEntryID</th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-sm-3" style="margin-top:20px;">
                                <div class="form-group">
                                    <button id="btnsave" class="btn btn-success btn-xs" onclick="Save()">Save</button>
                                    <input type="button" name="clearProfile" value="Clear" class="btn cursor" title="clear" id="clearValue" onclick="Clear()" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class=" content-area" id="divOpenWorkOrderSummary" style="display:none">
    <div class="page-header">
        <h4 class="page-title">List of Open Work Orders(Import) </h4>
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a onclick="BackToWorkOrder();" class="btn btn-primary btn-success text-right" style="align-content:center;color:white"><i class="fa fa-arrow-left" data-placement="bottom" title="Add Work Order"></i> </a>
            </li>
        </ol>
    </div>
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <div class="form-horizontal">
                        <div class="row">
                            <div class="col-lg-12 col-sm-12">
                                <div class="table-responsive">
                                    <table class="table table-bordered table-hover tbl-cart text-nowrap" id="tblWorkOrderOpenList" style="width:100%;">
                                        <thead>
                                            <tr>
                                                <th></th>
                                                @*<th></th>*@
                                                <th class="wd-15p sorting">Sr No</th>
                                                <th class="wd-15p sorting">Work Order No</th>
                                                <th class="wd-15p sorting">Sequence No</th>
                                                <th class="wd-15p sorting">Work Order Date</th>
                                                <th class="wd-15p sorting">WO Type</th>
                                                <th class="wd-15p sorting">IGM No</th>
                                                <th class="wd-15p sorting">Item No</th>
                                                <th class="wd-15p sorting">On Account</th>
                                                <th class="wd-15p sorting">CHA</th>
                                                <th class="wd-15p sorting">Container No</th>
                                                <th class="wd-15p sorting">Pkgs</th>
                                                <th class="wd-15p sorting">Vendor</th>
                                                <th class="wd-15p sorting">Vehicle No</th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>$(document).ready(function () {
            $('#tblWorkOrderDets').dataTable({
                "bLengthChange": false,
                "bInfo": false,
                "bPaginate": false,
                // "bFilter": false,
                "paging": false,
                "order": [],
                "aoColumnDefs": [
                    {
                        'bSortable': false,
                        'aTargets': [0]
                    }

                ]
            })
        });
        function OnStuffLocationChange() {
            var ddlStuffLocation = $("#ddlStuffLocation").val();

            if (ddlStuffLocation != "") {
                if (ddlStuffLocation == "Container") {
                    $("#divWarehouse").hide();
                    $("#divContainerNo").show();
                    if ($("#ddlWOType").val() == "Stuffing") {
                        $("#divVehicle").hide();
                        try {
                            GetCartTotalPkgs();
                        }
                        catch (ex) {}
                    }
                    else { $("#divVehicle").show();}
                }
                else if (ddlStuffLocation == "Warehouse") {
                    $("#divWarehouse").show();
                    $("#divContainerNo").hide();
                    $("#divVehicle").show();
                }
            }
            else {
                $("#divContainerNo").hide();
                $("#divWarehouse").hide();
                $("#divVehicle").show();
            }
        }
        function OnAddSBNo() {
            Sub_CLear()
            var txtSBNo = document.getElementById('txtSBNo').value;
            var ddlWOType = document.getElementById('ddlWOType').value;


            if (txtSBNo == "") {
                alert('Please enter SB No first!');
                document.getElementById('txtSBNo').focus();
                return false;
            }
            if (ddlWOType == "") {
                alert('Please select work order type first!');
                document.getElementById('ddlWOType').focus();
                return false;
            }
            var data1 = { 'SBNO': txtSBNo, 'WorkType': ddlWOType };
            var data = JSON.stringify(data1);

            $.ajax({
                url: "/WorkOrder/ShowSBNODets",
                type: 'Post',
                data: data,
                async: false,
                contentType: 'application/json; charset=utf-8',
                success: function (response) {
                    debugger;
                    if (response == "") {
                        alert("Record(s) not found")
                        document.getElementById("lblCHAName").innerHTML = "";
                        document.getElementById("lblImporterName").innerHTML = "";
                        document.getElementById("lblOnAccountName").innerHTML = "";
                        document.getElementById("lblManiFestQty").innerHTML = "";
                        document.getElementById("lblCargoDescription").innerHTML = "";
                        document.getElementById("lblSBEntryID").innerHTML = "";
                        document.getElementById("lblOnAccountID").innerHTML = "";
                        document.getElementById('txtSBNo').focus();
                        return false;
                    }
                    else {
                        document.getElementById("lblCHAName").innerHTML = response[0].CHAName;
                        document.getElementById("lblImporterName").innerHTML = response[0].ShipperName;
                        document.getElementById("lblOnAccountName").innerHTML = response[0].OnAccount;
                        document.getElementById("lblManiFestQty").innerHTML = response[0].ManifestQty;
                        document.getElementById("lblCargoDescription").innerHTML = response[0].CargoDescription;
                        document.getElementById("lblSBEntryID").innerHTML = response[0].SBEntryID;
                        document.getElementById("lblCHAID").innerHTML = response[0].CHAID;
                        document.getElementById("lblOnAccountID").innerHTML = response[0].OnAccountID;
                        $("#ddlPkgType").val(response[0].Unit);
                        GetVehicleNos(response[0].SBEntryID);
                        GetCartTotalPkgs();
                    }
                },
                failure: function (response) {
                    alert(response);
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            })
        }
        function GetVehicleNos(SBEntryID) {
            var data1 = { 'SBEntryID': SBEntryID, 'SBNO': $("#txtSBNo").val() };
            var data = JSON.stringify(data1);
            $.ajax({
                url: "/WorkOrder/VehicleNos",
                type: 'Post',
                data: data,
                async: false,
                contentType: 'application/json; charset=utf-8',
                success: function (response) {
                    var select = $("#ddlVehicleNo");
                    select.empty();
                    select.append($('<option/>', {
                        value: "",
                        text: "--Select--"
                    }));

                    $.each(response, function (data, value) {

                        select.append($("<option></option>").val(value.VehicleNo).html(value.VehicleNo));
                    })
                },
                failure: function (response) {
                    alert(response);
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            })
        }
        function ShowWorkOrderList() {
            var data = [];
            var sumpkgs = 0;
            var sumwt = 0;
            var StuffPkgs = $("#txtStuffDStuffPkgs").val();
            var StuffWt = $("#txtWeight").val();
            var Totpkgs = $("#txtTotalPkgs").val();
            var TotWt = $("#txtTotalWeight").val();
            var table = document.getElementById("tblPaymentDet");
            var ddlType = $("#ddlWOType").val();

            if (table != null) {
                if (table.rows.length > 1) {
                    for (var i = 1; i < table.rows.length; i++) {
                        row = table.rows[i];
                        var VehNo = "";
                        var Pkgs = 0;
                        var Weight = 0;
                        VehNo = row.cells[5].innerHTML;
                        Pkgs = row.cells[6].innerHTML;
                        Weight = row.cells[8].innerHTML;
                        if (VehNo == $("#ddlVehicleNo option:selected").text()) {
                            sumpkgs = parseFloat(sumpkgs) + parseFloat(Pkgs);
                            sumwt = parseFloat(sumwt) + parseFloat(Weight);
                        }
                    }
                }
            }
            sumpkgs = parseFloat(sumpkgs) + parseFloat(StuffPkgs);
            sumwt = parseFloat(sumwt) + parseFloat(StuffWt);
            if (parseFloat(sumpkgs) > parseFloat(Totpkgs)) {
                alert('Pkgs should not be greater than Total Pkgs')
                $("#txtStuffDStuffPkgs").val("");
                document.getElementById('txtStuffDStuffPkgs').focus();
                return false;
            }
            if ((parseFloat(sumwt) > parseFloat(TotWt)) && ddlType !="Custom Examinations") {
                alert('Weight should not be greater than Total Weight')
                $("#txtWeight").val("");
                document.getElementById('txtWeight').focus();
                return false;
            }
            var TotalPkgs = document.getElementById("lblTotStuffPkgs").innerHTML;
            var ManifestPkgs = document.getElementById("lblManiFestQty").innerHTML;

            if (((parseFloat(TotalPkgs) + parseFloat($("#txtStuffDStuffPkgs").val())) > parseFloat(ManifestPkgs)) && ddlType != "Custom Examinations") {
                alert("Stuffing Qty should not be greater than Manifest Qty")
                document.getElementById('txtStuffDStuffPkgs').focus();
                return false;
            }

            var pvendor = $("#ddlVendor").val();
            var pvendorId = $("#hdnVendorId").val();
            var pvendorName = $("#ddlVendor option:selected").text();

            if (pvendorId != "" && pvendorId > 0) {
                if (pvendor != pvendorId) {
                    alert('Please select valid vendor id');
                    return false;
                }
            }

            TotalPkgs = parseFloat(TotalPkgs) + parseFloat($("#txtStuffDStuffPkgs").val());
            document.getElementById("lblTotStuffPkgs").innerHTML = TotalPkgs;


            var res = validate();
            if (res == false) {
                return false;
            }
            var txtContainerNo = $("#txtContainerNo").val();
            var txtStuffDStuffPkgs = $("#txtStuffDStuffPkgs").val();
            var ddlVendorID = $("#ddlVendor option:selected").val();
            var txtJoNo = $("#txtJoNo").val();
            var ddlVendor = $("#ddlVendor option:selected").text();
            var ddlEQTypeID = $("#ddlEQType option:selected").val();
            var ddlEQType = $("#ddlEQType option:selected").text();
            var txtRemarks = $("#txtRemarks").val();
            var txtWeight = $("#txtWeight").val();


            var ContainerNo = txtContainerNo + "<input Name=ContainerNo type=hidden id=ContainerNo   value='" + txtContainerNo + "'>";
            var StuffPkgs = txtStuffDStuffPkgs + "<input Name=StuffPkgs type=hidden id=StuffPkgs   value='" + txtStuffDStuffPkgs + "'>";
            var Vendor = ddlVendor + "<input Name=Vendor type=hidden id=Vendor   value='" + ddlVendor + "'>";
            var VendorID = ddlVendorID + "<input Name=VendorID type=hidden id=VendorID   value='" + ddlVendorID + "'>";
            var SBEntryID = txtJoNo + "<input Name=SBEntryID type=hidden id=SBEntryID   value='" + txtJoNo + "'>";
            var Equipment = ddlEQType + "<input Name=ddlEQType type=hidden id=ddlEQType   value='" + ddlEQType + "'>";
            var EquipmentID = ddlEQTypeID + "<input Name=EquipmentID type=hidden id=EquipmentID   value='" + ddlEQTypeID + "'>";
            var Remarks = txtRemarks + "<input Name=Description type=hidden id=Description   value='" + txtRemarks + "'>";
            var Weight = txtWeight + "<input Name=Weight type=hidden id=Weight value='" + txtWeight + "'>";

            var t = $('#tblWorkOrderDets').DataTable();
            t.row.add([
                "<button type=\"button\" class=\"btn btn-icon btn-primary btn-danger removebutton \" name=\"removebutton\" style=\"height:35px;\" onclick=\"CancelItem()\"><i class=\"fe fe-trash\" style=\"font-size: 16px;\"></i></button>",
                ContainerNo,
                StuffPkgs,
                Weight,
                Vendor,
                Equipment,
                Remarks,
                EquipmentID,
                VendorID,
                SBEntryID

            ]).draw(false);

            document.getElementById('txtContainerNo').value = "";
            document.getElementById('txtStuffDStuffPkgs').value = "";
            document.getElementById('txtWeight').value = "";
            document.getElementById('txtTotalPkgs').value = "";
            document.getElementById('txtTotalWeight').value = "";
            document.getElementById('ddlVendor').value = "";
            document.getElementById('ddlEQType').value = "";
            document.getElementById('txtRemarks').value = "";
            $("#divWarehouse").hide();
            $("#divContainerNo").hide();
        }
        function validate() {
            debugger;
            var txtContainerNo = document.getElementById('txtContainerNo').value;
            var txtStuffDStuffPkgs = document.getElementById('txtStuffDStuffPkgs').value;
            var ddlVendor = document.getElementById('ddlVendor').value;
            var ddlEQType = document.getElementById('ddlEQType').value;
            var txtWeight = document.getElementById('txtWeight').value;
            var ddlWOType = document.getElementById('ddlWOType').value;


            var blResult = Boolean;
            blResult = true;
            document.getElementById('txtContainerNo').style.borderColor = "Gainsboro";
            document.getElementById('txtStuffDStuffPkgs').style.borderColor = "Gainsboro";
            document.getElementById('ddlVendor').style.borderColor = "Gainsboro";
            document.getElementById('ddlEQType').style.borderColor = "Gainsboro";
            document.getElementById('txtWeight').style.borderColor = "Gainsboro";


            if (txtStuffDStuffPkgs == "") {
                document.getElementById('txtStuffDStuffPkgs').style.borderColor = "red"
                blResult = blResult && false;
            }
            if (ddlEQType == "") {
                document.getElementById('ddlEQType').style.borderColor = "red"
                blResult = blResult && false;
            }
            if (txtWeight == "") {
                document.getElementById('txtWeight').style.borderColor = "red"
                blResult = blResult && false;
            }
            if (blResult == false) { alert('Please fill the required fields!'); }
            return blResult;
        }
        function CancelItem() {
            var table = $('#tblWorkOrderDets').DataTable();
            $('#tblWorkOrderDets tbody').on('click', '.removebutton', function () {
                table
                    .row($(this).parents('tr'))
                    .remove()
                    .draw();

            });
        }
        function GetTotalPkgsVehicleWise() {
            var ddlVehicleNo = document.getElementById('ddlVehicleNo').value;
            var lblSBEntryID = document.getElementById("lblSBEntryID").innerHTML;

            if (ddlVehicleNo == "") {
                $("#txtTotalPkgs").val("");
                $("#txtTotalWeight").val("");
                document.getElementById("lblUnitWt").innerHTML = "";
                document.getElementById("lblPrevPkgs").innerHTML = "";
                return false
            }
            var data1 = { 'SBEntryID': lblSBEntryID, 'SBNO': $("#txtSBNo").val(), 'VehicleNo': ddlVehicleNo };
            var data = JSON.stringify(data1);

            $.ajax({
                url: "/WorkOrder/TotalPkgsVehicleWise",
                type: 'Post',
                data: data,
                async: false,
                contentType: 'application/json; charset=utf-8',
                success: function (response) {
                    $("#txtTotalPkgs").val(response[0].TotPkgs);
                    $("#txtTotalWeight").val(response[0].TotWeight);
                    document.getElementById("lblUnitWt").innerHTML = response[0].UnitWt;
                    document.getElementById("lblPrevPkgs").innerHTML = response[0].PrevPkgs;

                },
                failure: function (response) {
                    alert(response);
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            })
        }

        function GetCartTotalPkgs() {
            var txtSBNo = document.getElementById('txtSBNo').value;
            var ddlWOType = document.getElementById("ddlWOType").value;


            var data1 = { 'SBNO': txtSBNo, 'WorkType': ddlWOType };
            var data = JSON.stringify(data1);

            $.ajax({
                url: "/WorkOrder/ShowCartWeightDets",
                type: 'Post',
                data: data,
                async: false,
                contentType: 'application/json; charset=utf-8',
                success: function (response) {
                    debugger;
                    $("#txtTotalPkgs").val(response.TotPkgs);
                    $("#txtTotalWeight").val(response.TotWeight);
                    document.getElementById("lblUnitWt").innerHTML = response.UnitWt;

                },
                failure: function (response) {
                    alert(response);
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            })
        }

        function Save() {
            debugger;
            var res1 = validateSave();
            var lblCHAID = document.getElementById('lblCHAID').innerHTML;
            var lblOnAccountID = document.getElementById('lblOnAccountID').innerHTML;
            var txtContainerNo = document.getElementById('txtContainerNo').value;
            var ddlWOType = document.getElementById('ddlWOType').value;
            var ddlCategory = document.getElementById('ddlCategory').value;
            var TruckNo = document.getElementById('txtTruckNo').value;
            var CargoDescription = document.getElementById('lblCargoDescription').innerHTML;
            if (lblCHAID <= "0") {
                alert("Cha Name cannot be blank.");
                return false;
            }

            if (res1 == false) {
                $("#tracker-loader").fadeOut("slow");
                return false;
            }
            var itemcount = checkItemcount();
            if (itemcount) {
                var SelectedData = new Array();
                $('#tblWorkOrderDets tbody tr').each(function (i, row) {
                    var data = {};

                    $(this).find('input').each(function () {

                        data[this.id] = $(this).val();
                    })
                    SelectedData.push(data);

                });
                var data1 = { 'WOdata': SelectedData, 'WODate': $("#txtWODate").val(), 'WOType': ddlWOType, 'CHAID': lblCHAID, 'OnAccountID': 0, 'Category': ddlCategory, 'TruckNo': TruckNo, 'CargoDescription': CargoDescription};

                var data = JSON.stringify(data1);

                $.ajax({
                    url: "/ImportWorkOrder/WorkOrderSave",
                    data: data,
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (response) {
                        if (response == "1") {
                            alert("Record saved successfully");
                            Clear();
                        }
                        else {
                            alert("Record not saved successfully. Try Again!");
                        }
                    },
                    error: function (errormessage) {
                        alert("error");
                        alert(errormessage.responseText);
                    }
                })
            }
            else {
                alert("Please Add Work Order details");
            }
        }
        function checkItemcount() {

            var table = $('#tblWorkOrderDets').DataTable();

            if (table.rows().count() == 0) {

                return false;
            }
            return true;
        }
        function validateSave() {
            var txtWODate = document.getElementById('txtWODate').value;
            var ddlWOType = document.getElementById('ddlWOType').value;
            var lblCHAID = document.getElementById('lblCHAID').innerHTML;

            var blResult = Boolean;
            blResult = true;
            document.getElementById('txtWODate').style.borderColor = "Gainsboro";
            document.getElementById('ddlWOType').style.borderColor = "Gainsboro";

            if (txtWODate == "") {
                document.getElementById('txtWODate').style.borderColor = "red"
                blResult = blResult && false;
            }
            if (ddlWOType == "") {
                document.getElementById('ddlWOType').style.borderColor = "red"
                blResult = blResult && false;
            }
            if (lblCHAID == "") {
                blResult = blResult && false;
            }

            if (blResult == false) { alert('Please fill the required fields!'); }
            return blResult;
        }
        function Sub_CLear() {
            document.getElementById("lblCHAName").innerHTML = "";
            document.getElementById("lblImporterName").innerHTML = "";
            document.getElementById("lblOnAccountName").innerHTML = "";
            document.getElementById("lblManiFestQty").innerHTML = "";
            document.getElementById("lblCargoDescription").innerHTML = "";
            document.getElementById("lblOnAccountID").innerHTML = "";
            document.getElementById("lblTotStuffPkgs").innerHTML = "";
            document.getElementById("lblUnitWt").innerHTML = "";
            //$("#txtContainerNo").val("")
            $("#txtTotalPkgs").val("");
            $("#txtTotalWeight").val("");
            $("#txtStuffDStuffPkgs").val("");
            $("#ddlVendor").val("");
            $("#ddlEQType").val("");
            $("#txtRemarks").val("");
            //$("#ddlCategory").val("Import");

            //var table = $('#tblWorkOrderDets').DataTable();
            //table
            //    .clear()
            //    .draw();
        }
        function Clear() {
            $("#txtWorkOrder").val("")
            $("#ddlWOType").val("")
            $("#txtSBNo").val("")
            document.getElementById("lblCHAName").innerHTML = "";
            document.getElementById("lblImporterName").innerHTML = "";
            document.getElementById("lblOnAccountName").innerHTML = "";
            document.getElementById("lblManiFestQty").innerHTML = "";
            document.getElementById("lblCargoDescription").innerHTML = "";
            document.getElementById("lblSBEntryID").innerHTML = "";
            document.getElementById("lblCHAID").innerHTML = "";
            document.getElementById("lblOnAccountID").innerHTML = "";
            document.getElementById("lblTotStuffPkgs").innerHTML = "";
            document.getElementById("lblUnitWt").innerHTML = "";
            document.getElementById('hdnVendorId').value = "";
            $("#ddlStuffLocation").val("")
            $("#txtContainerNo").val("")
            $("#ddlWarehouse").val("")
            $("#ddlVehicleNo").val("")
            $("#txtTotalPkgs").val("")
            $("#txtTotalWeight").val("")
            $("#txtStuffDStuffPkgs").val("")
            $("#ddlVendor").val("")
            $("#ddlEQType").val("")
            $("#txtRemarks").val("")

            var table = $('#tblWorkOrderDets').DataTable();
            table
                .clear()
                .draw();
        }
        function OpenWOSummary() {
            $("#divOpenWorkOrderSummary").show();
            $("#divWorkOrder").hide();

            $.ajax({
                url: "/ImportWorkOrder/ListOpenWorkOrder",
                //data: data,
                type: "POST",
                contentType: "application/json; charset=utf-8",
                // dataType: "json",
                success: function (data) {
                    $('#tblWorkOrderOpenList').dataTable({
                        "destroy": true,
                        "bLengthChange": false,
                        "aaData": data,
                        "paging": false,
                        "aaSorting": [[0, 'asc']],
                        "order": [],
                        "aoColumnDefs": [
                            {
                                'bSortable': false,
                                'aTargets': [0],
                            },

                        ],
                        "dom": 'Bfrtip',
                        "buttons": [{
                            "extend": 'excel',
                            "title": 'List of Open Work Orders',
                            "filename": 'OpenWorkOrders'
                        }
                        ],
                        "columns": [
                            {
                                "data": "data",
                                "render": function (data, type, row, meta) {
                                    data = "<a href=\"#\" class=\"btn btn-sm btn-info\" title=\"Close\" onclick=\"CloseWO('" + row.WONo + '~' + row.SequenceNo + "')\">Close</a>";
                                    return data;
                                }
                            },
                            { "data": "SrNo" },
                            { "data": "WONo" },
                            { "data": "SequenceNo" },
                            { "data": "WODate" },
                            { "data": "WOType" },
                            { "data": "IGMNo" },
                            { "data": "ItemNo" },
                            { "data": "OnAccount" },
                            { "data": "CHA" },
                            { "data": "ContainerNo" },
                            { "data": "Pkgs" },
                            { "data": "Vendor" },
                            { "data": "VehicleNo" },

                        ]
                    })
                },

                error: function (errormessage) {
                    alert(errormessage.responseText);
                }
            });
        }
        function BackToWorkOrder() {
            $("#divOpenWorkOrderSummary").hide();
            $("#divWorkOrder").show();
        }
        function CloseWO(WONo) {
            debugger;
            var splData = WONo.split('~');
            var WorkNo = splData[0];
            var SequenceNo = splData[1];

            var data1 = { 'WONo': WorkNo , 'SequenceNo': SequenceNo };
            var data = JSON.stringify(data1);
            $.ajax({
                url: "/ImportWorkOrder/CloseWorkOrder",
                data: data,
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    OpenWOSummary()
                    alert(data);

                },
                failure: function (response) {
                    alert(response);
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            })
        }
        function BlurCOntainerNo() {
            Sub_CLear()
            var txtContainerNo = document.getElementById('txtContainerNo').value;
            var ddlWOType = document.getElementById('ddlWOType').value;
            var ddlCategory = document.getElementById('ddlCategory').value;

            if (txtContainerNo == "") {
                alert('Please enter Container No first!');
                document.getElementById('txtContainerNo').focus();
                return false;
            }
            if (ddlWOType == "") {
                alert('Please select work order type first!');
                document.getElementById('ddlWOType').focus();
                return false;
            }

            var data1 = { 'ContainerNo': txtContainerNo, 'Category': ddlCategory, 'ddlWOType': ddlWOType};
            var data = JSON.stringify(data1);

            $.ajax({
                url: "/ImportWorkOrder/ContainerValidation",
                data: data,
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    debugger;
                    if (data == "") {
                        alert("Record(s) not found")
                        document.getElementById("lblCHAName").innerHTML = "";
                        document.getElementById("lblImporterName").innerHTML = "";
                        document.getElementById("lblOnAccountName").innerHTML = "";
                        document.getElementById("lblManiFestQty").innerHTML = "";
                        document.getElementById("lblCargoDescription").innerHTML = "";
                        document.getElementById("lblSBEntryID").innerHTML = "";
                        document.getElementById("lblCHAID").innerHTML = "";
                        document.getElementById("lblOnAccountID").innerHTML = "";
                        document.getElementById("txtTotalPkgs").value="";
                        document.getElementById("txtTotalWeight").value = "";
                        document.getElementById("txtIGMNo").value = "";
                        document.getElementById("txtJoNo").value = "";
                        $("#txtStuffDStuffPkgs").val('');
                        $("#txtWeight").val('');
                        document.getElementById('txtContainerNo').focus();
                        return false;
                    }
                    else {
                        var CHAId = document.getElementById("lblCHAID").innerHTML;
                        if (CHAId != "") {
                            if (CHAId > 0) {
                                if (data[0].CHAID != CHAId) {
                                    alert('CHA Name cannot be Differenct.');
                                    return false;
                                }
                            }
                        }
                        document.getElementById("lblCHAName").innerHTML = data[0].CHAName;
                        document.getElementById("lblImporterName").innerHTML = data[0].ShipperName;
                        document.getElementById("lblOnAccountName").innerHTML = data[0].OnAccount;
                        document.getElementById("lblManiFestQty").innerHTML = data[0].ManifestQty;
                        document.getElementById("lblCargoDescription").innerHTML = data[0].CargoDescription;
                        document.getElementById("lblSBEntryID").innerHTML = data[0].SBEntryID;
                        document.getElementById("lblCHAID").innerHTML = data[0].CHAID;
                        document.getElementById("lblOnAccountID").innerHTML = data[0].OnAccountID;
                        document.getElementById("txtTotalPkgs").value=data[0].ManifestQty;
                        document.getElementById("txtTotalWeight").value = data[0].Weight;
                        document.getElementById("txtIGMNo").value = data[0].SBNo;
                        document.getElementById("txtJoNo").value = data[0].SBEntryID;

                        if (ddlWOType != "Custom Examinations") {
                            $("#txtStuffDStuffPkgs").val(data[0].ManifestQty);
                            $("#txtWeight").val(data[0].Weight);
                        }
                        else {
                            $("#txtStuffDStuffPkgs").val('');
                            $("#txtWeight").val('');
                        }

                    }
                },
                failure: function (response) {
                    alert(response);
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            })
        }

        $("#ddlCategory").change(function () {
            debugger;
            if ($("#ddlCategory").val() != "Import") {
                $("#divTruckNo").show();
                $("#divTruckNoAdd").show();
                $("#divBOE").show();
                $("#divBOEAdd").show();


            }
            else {
                $("#divTruckNo").hide();
                $("#divTruckNoAdd").hide();
                $("#divBOE").hide();
                $("#divBOEAdd").hide();
            }
        });

        $("#txtStuffDStuffPkgs").change(function () {
            debugger;
            var TotPkgs = $("#txtTotalPkgs").val();
            var TotWt = $("#txtTotalWeight").val();
            var txtStuffDStuffPkgs = $("#txtStuffDStuffPkgs").val();
            var ddlWOType = $("#ddlWOType").val();

            var stuffPkgs = 0;

            if (TotPkgs == "") {
                alert("Total Pkgs cannot be Blank.");
                return false;
            }

            if (TotWt == "") {
                alert("Total Wt cannot be Blank.");
                return false;
            }

            if (txtStuffDStuffPkgs == "") {
                alert("Package cannot be Blank.");
                return false;
            }

            if (ddlWOType == "Custom Examinations") {
                stuffPkgs = parseInt(txtStuffDStuffPkgs) * 2;
            }

            $("#txtWeight").val(parseFloat((parseFloat(TotWt)/parseInt(TotPkgs))* parseInt(stuffPkgs),2));

        });

        $("#ddlWOType").change(function () {

            if (ddlWOType != "Custom Examinations") {
                $("#txtStuffDStuffPkgs").val($("#txtTotalPkgs").val());
                $("#txtWeight").val($("#txtTotalWeight").val());
            }
            else {
                $("#txtStuffDStuffPkgs").val('');
                $("#txtWeight").val('');
            }
        });

        function ChangeWOType() {
            //var ddlWOType = $("#ddlWOType").val();
            //if (ddlWOType == "Stuffing") {

            //}
            //else if (ddlWOType == "Carting") {

            //}
        }

        function BlurTruckNo() {
            Sub_CLear()
            var txtTruckNo = document.getElementById('txtTruckNo').value;
            var ddlWOType = document.getElementById('ddlWOType').value;
            var ddlCategory = document.getElementById('ddlCategory').value;

            if (txtTruckNo == "") {
                alert('Please enter Truck No first!');
                document.getElementById('txtTruckNo').focus();
                return false;
            }
            if (ddlWOType == "") {
                alert('Please select work order type first!');
                document.getElementById('ddlWOType').focus();
                return false;
            }

            var data1 = { 'TruckNo': txtTruckNo, 'Category': ddlCategory, 'ddlWOType': ddlWOType};
            var data = JSON.stringify(data1);
            console.log(data);
            $.ajax({
                url: "/ImportWorkOrder/TruckValidation",
                data: data,
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    debugger;
                    if (data == "") {
                        alert("Record(s) not found")
                        document.getElementById("lblCHAName").innerHTML = "";
                        document.getElementById("lblImporterName").innerHTML = "";
                        document.getElementById("lblOnAccountName").innerHTML = "";
                        document.getElementById("lblManiFestQty").innerHTML = "";
                        document.getElementById("lblCargoDescription").innerHTML = "";
                        document.getElementById("lblSBEntryID").innerHTML = "";
                        document.getElementById("lblCHAID").innerHTML = "";
                        document.getElementById("lblOnAccountID").innerHTML = "";
                        document.getElementById("txtTotalPkgs").value = "";
                        document.getElementById("txtTotalWeight").value = "";
                        document.getElementById("txtIGMNo").value = "";
                        document.getElementById("txtJoNo").value = "";
                        $("#txtStuffDStuffPkgs").val('');
                        $("#txtWeight").val('');
                        document.getElementById('txtTruckNo').focus();
                        return false;
                    }
                    else {
                        var CHAId = document.getElementById("lblCHAID").innerHTML;
                        if (CHAId != "") {
                            if (CHAId > 0) {
                                if (data[0].CHAID != CHAId) {
                                    alert('CHA Name cannot be Differenct.');
                                    return false;
                                }
                            }
                        }
                        document.getElementById("txtContainerNo").value = data[0].ContainerNo;
                        document.getElementById("lblCHAName").innerHTML = data[0].CHAName;
                        document.getElementById("lblImporterName").innerHTML = data[0].ShipperName;
                        document.getElementById("lblOnAccountName").innerHTML = data[0].OnAccount;
                        document.getElementById("lblManiFestQty").innerHTML = data[0].ManifestQty;
                        document.getElementById("lblCargoDescription").innerHTML = data[0].CargoDescription;
                        document.getElementById("lblSBEntryID").innerHTML = data[0].SBEntryID;
                        document.getElementById("lblCHAID").innerHTML = data[0].CHAID;
                        document.getElementById("lblOnAccountID").innerHTML = data[0].OnAccountID;
                        document.getElementById("txtTotalPkgs").value = data[0].ManifestQty;
                        document.getElementById("txtTotalWeight").value = data[0].Weight;
                        document.getElementById("txtIGMNo").value = data[0].SBNo;
                        document.getElementById("txtJoNo").value = data[0].SBEntryID;


                        if (ddlWOType != "Custom Examinations") {
                            $("#txtStuffDStuffPkgs").val(data[0].ManifestQty);
                            $("#txtWeight").val(data[0].Weight);
                        }
                        else {
                            $("#txtStuffDStuffPkgs").val('');
                            $("#txtWeight").val('');
                        }

                    }
                },
                failure: function (response) {
                    alert(response);
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            })
        }

        function FocusBoe() {
            Sub_CLear()
            var txtTruckNo = document.getElementById('txtboe').value;
            var ddlWOType = document.getElementById('ddlWOType').value;
            var ddlCategory = document.getElementById('ddlCategory').value;

            if (txtTruckNo == "") {
                alert('Please enter Truck No first!');
                document.getElementById('txtboe').focus();
                return false;
            }
            if (ddlWOType == "") {
                alert('Please select work order type first!');
                document.getElementById('ddlWOType').focus();
                return false;
            }

            var data1 = { 'TruckNo': txtTruckNo, 'Category': ddlCategory, 'ddlWOType': ddlWOType };
            var data = JSON.stringify(data1);
            console.log(data);
            $.ajax({
                url: "/ImportWorkOrder/TruckBOE",
                data: data,
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    debugger;
                    if (data == "") {
                        alert("Record(s) not found")
                        document.getElementById("lblCHAName").innerHTML = "";
                        document.getElementById("lblImporterName").innerHTML = "";
                        document.getElementById("lblOnAccountName").innerHTML = "";
                        document.getElementById("lblManiFestQty").innerHTML = "";
                        document.getElementById("lblCargoDescription").innerHTML = "";
                        document.getElementById("lblSBEntryID").innerHTML = "";
                        document.getElementById("lblCHAID").innerHTML = "";
                        document.getElementById("lblOnAccountID").innerHTML = "";
                        document.getElementById("txtTotalPkgs").value = "";
                        document.getElementById("txtTotalWeight").value = "";
                        document.getElementById("txtIGMNo").value = "";
                        document.getElementById("txtJoNo").value = "";
                        $("#txtStuffDStuffPkgs").val('');
                        $("#txtWeight").val('');
                        document.getElementById('txtTruckNo').focus();
                        return false;
                    }
                    else {
                        var CHAId = document.getElementById("lblCHAID").innerHTML;
                        if (CHAId != "") {
                            if (CHAId > 0) {
                                if (data[0].CHAID != CHAId) {
                                    alert('CHA Name cannot be Differenct.');
                                    return false;
                                }
                            }
                        }
                        document.getElementById("txtContainerNo").value = data[0].ContainerNo;
                        document.getElementById("lblCHAName").innerHTML = data[0].CHAName;
                        document.getElementById("lblImporterName").innerHTML = data[0].ShipperName;
                        document.getElementById("lblOnAccountName").innerHTML = data[0].OnAccount;
                        document.getElementById("lblManiFestQty").innerHTML = data[0].ManifestQty;
                        document.getElementById("lblCargoDescription").innerHTML = data[0].CargoDescription;
                        document.getElementById("lblSBEntryID").innerHTML = data[0].SBEntryID;
                        document.getElementById("lblCHAID").innerHTML = data[0].CHAID;
                        document.getElementById("lblOnAccountID").innerHTML = data[0].OnAccountID;
                        document.getElementById("txtTotalPkgs").value = data[0].ManifestQty;
                        document.getElementById("txtTotalWeight").value = data[0].Weight;
                        document.getElementById("txtIGMNo").value = data[0].SBNo;
                        document.getElementById("txtJoNo").value = data[0].SBEntryID;
                        document.getElementById("txtTruckNo").value = data[0].VehicleNo;


                        if (ddlWOType != "Custom Examinations") {
                            $("#txtStuffDStuffPkgs").val(data[0].ManifestQty);
                            $("#txtWeight").val(data[0].Weight);
                        }
                        else {
                            $("#txtStuffDStuffPkgs").val('');
                            $("#txtWeight").val('');
                        }

                    }
                },
                failure: function (response) {
                    alert(response);
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            })
        }

        //function PrintWO(WONo) {
        //    //alert(trailerno);
        //    //alert(tpNo);
        //    data1 = { 'WONo': WONo};
        //    data = JSON.stringify(data1);
        //    $.ajax({
        //        url: "/WorkOrder/PrintWorkOrder",
        //        data: data,
        //        type: "POST",
        //        contentType: "application/json; charset=utf-8",
        //        // dataType: "json",
        //        success: function (response) {

        //            var myWindow = window.open("", "MsgWindow1");
        //            myWindow.close();
        //            var myWindow = window.open("", "MsgWindow1");
        //            myWindow.document.write(response);
        //        },

        //        error: function (errormessage) {
        //            alert(errormessage.responseText);
        //        }
        //    });

        //}</script>

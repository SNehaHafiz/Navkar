
@{
    ViewBag.Title = "ViewTraiffDetails";
    Layout = "~/Views/Shared/_LayoutDashboard.cshtml";
}


<script src="~/js/GetTableJson.js"></script>
<div id="tracker-loader"></div>

<div class=" content-area" id="diventry">
    <div class="page-header">
        <h4 class="page-title">View Tariff Details</h4>
    </div>
    <div class="row">
        <div class="col-md-12 col-lg-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">

                        <div class="col-lg-2 col-sm-12">
                            <div class="form-group">
                                <label class="form-label mandatory">Activity Type</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("ddlSearchType", new List<SelectListItem>
                { new SelectListItem { Text = "--Select--", Value = ""},
                  new SelectListItem { Text = "Import", Value = "Import"},
                  new SelectListItem { Text = "Export", Value = "Export"},
                  new SelectListItem { Text = "Domestic", Value = "Domestic"},
                  new SelectListItem { Text = "Bond", Value = "Bond"},

                  }, new { @class = "form-control ", autocomplete = "off" })

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-12" id="divTraiffImport">
                            <div class="form-group">
                                <label class="form-label mandatory">Tariff Description</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("ddltariffDescription", (IEnumerable<SelectListItem>)ViewBag.TraiffDetailsList, "--Select-- ", new { @class = "form-control", @id = "ddltariffDescription", name = "ddltariffDescription", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-12" id="divTraiffDBond" style="display:none">
                            <div class="form-group">
                                <label class="form-label mandatory">Tariff Bond Description</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("DDlBondTraiff", (IEnumerable<SelectListItem>)ViewBag.TraiffBondList, "--Select-- ", new { @class = "form-control", @id = "DDlBondTraiff", name = "DDlBondTraiff", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-12" id="divTraiffDomestic" style="display:none">
                            <div class="form-group">
                                <label class="form-label mandatory">Tariff Domestic Description</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("DDlDomesticTraiff", (IEnumerable<SelectListItem>)ViewBag.TraiffDomesticList, "--Select-- ", new { @class = "form-control", @id = "DDlDomesticTraiff", name = "DDlDomesticTraiff", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-12">
                            <div class="form-group">
                                <label class="form-label mandatory">Charges Head</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("ddlaccountname", (IEnumerable<SelectListItem>)ViewBag.AccountmasterList, "--Select-- ", new { @class = "form-control", @id = "ddlaccountname", name = "ddlaccountname", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-sm-12" id="divimport">
                            <div class="form-group">
                                <label class="form-label mandatory">Delivery Type</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("ddlINOUT", new List<SelectListItem>
                { new SelectListItem { Text = "--Select--", Value = ""},
                  new SelectListItem { Text = "Loaded", Value = "Loaded"},
                  new SelectListItem { Text = "Destuff", Value = "Destuff"},

                  }, new { @class = "form-control ", autocomplete = "off" })

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-sm-12" id="divExport" style="display:none">
                            <div class="form-group">
                                <label class="form-label mandatory">Delivery Type</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("ddlExportDl", (IEnumerable<SelectListItem>)ViewBag.TraiffExportDetailsList, "--Select-- ", new { @class = "form-control", @id = "ddlExportDl", name = "ddlExportDl", autocomplete = "off" })


                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-sm-12" id="divbond" style="display:none">
                            <div class="form-group">
                                <label class="form-label mandatory">Delivery Type</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("ddlBond", (IEnumerable<SelectListItem>)ViewBag.TraiffBondDetailsList, "--Select-- ", new { @class = "form-control", @id = "ddlBond", name = "ddlBond", autocomplete = "off" })


                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-sm-12" id="divDomestic" style="display:none">
                            <div class="form-group">
                                <label class="form-label mandatory">Delivery Type</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("DDlDomistic", (IEnumerable<SelectListItem>)ViewBag.TraiffDomesticDetailsList, "--Select-- ", new { @class = "form-control", @id = "DDlDomistic", name = "DDlDomistic", autocomplete = "off" })


                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-sm-12" id="DivCargotype">
                            <div class="form-group">
                                <label class="form-label mandatory">Cargo Type</label>
                                <div class="row gutters-xs">
                                    <div class="col">


                                        @Html.DropDownList("ddlcontainertype", (IEnumerable<SelectListItem>)ViewBag.Containertype, "--Select-- ", new { @class = "form-control", @id = "ddlcontainertype", name = "ddlcontainertype", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 col-lg-4">
                            <div class="form-group">
                                <label class="form-label"></label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        <input type="button" id="btnShow" value="Show" class="btn btn-primary" onclick="ShowDetails()" />

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    @Html.ActionLink("Export To Excel", "ExportToExcelTraiffDetails", null, new { @class = "btn btn-primary btn-md" })
                    <div class="row">
                        <div class="col-lg-12 col-sm-12">
                            <div class="table-responsive">
                                <table id="example2" class="table table-bordered table-hover tbl-cart text-nowrap" style="width:100%">
                                    <thead>

                                        <tr>

                                            @*<th class="wd-10p sorting">Sr No</th>
                                <th class="wd-10p sorting">Paid ID</th>*@
                                        </tr>
                                    </thead>

                                </table>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <!-- table-wrapper -->
        </div>
        <!-- section-wrapper -->
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
      


    });
    $(window).on("load", function (e) {
        $("#tracker-loader").fadeOut("slow");
    })
</script>
<script>
    $('#ddlSearchType').change(function (e) {
        var SearchNO = $("#ddlSearchType").val();
     
        if (SearchNO == "Import") {
            $("#divimport").show();
            $("#divExport").hide();
            $("#divbond").hide();
            $("#divDomestic").hide();
            $("#DivCargotype").show();
            $("#divTraiffImport").show();
            $("#divTraiffDBond").hide();
            $("#divTraiffDomestic").hide();
        }
        if (SearchNO == "Export") {
            $("#divimport").hide();
            $("#divExport").show();
            $("#divbond").hide();
            $("#divDomestic").hide();
            $("#DivCargotype").show();
            $("#divTraiffImport").show();
            $("#divTraiffDBond").hide();
            $("#divTraiffDomestic").hide();
        }
        if (SearchNO == "Bond") {
            $("#divimport").hide();
            $("#divExport").hide();
            $("#divbond").show();
            $("#divDomestic").hide();
            $("#DivCargotype").hide();

            $("#divTraiffImport").hide();
            $("#divTraiffDBond").show();
            $("#divTraiffDomestic").hide();
            
        }
        if (SearchNO == "Domestic") {
            $("#divimport").hide();
            $("#divExport").hide();
            $("#divbond").hide();
            $("#divDomestic").show();
            $("#DivCargotype").hide();


            $("#divTraiffImport").hide();
            $("#divTraiffDBond").hide();
            $("#divTraiffDomestic").show();
        }
        

    });



</script>








<script>
    function ShowDetails() {

      
        $("#tracker-loader").fadeIn("slow");

        var SearchNO = $("#ddlSearchType").val();

        if (SearchNO == "Import") {
            var TraiffID = $("#ddltariffDescription option:selected").val();
            var AccountID = $("#ddlaccountname option:selected").val();
            var movementID = $("#ddlINOUT option:selected").val();
            var ContainerID = $("#ddlcontainertype option:selected").text();
            if (ContainerID == "--Select-- ") {
                ContainerID = '';
            }

            data1 = { 'TraiffID': TraiffID, 'AccountID': AccountID, 'ContainerID': ContainerID, 'movementID': movementID };
            data = JSON.stringify(data1);
            
           
            $.ajax({
                type: 'POST',
                url: '/UpdateDischarge/GetTraiffDetails',
                data: data,

                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: true,
                success: function (data) {

                    $("#example2").empty(data);
                    RepTableDataJson($("#example2"), data, "Traiff Details", "TraiffDetails_list");
                    $("#tracker-loader").fadeOut("slow");
                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                    $("#tracker-loader").fadeOut("slow");
                }
            });
        }
        if (SearchNO == "Export") {
            var TraiffID = $("#ddltariffDescription option:selected").val();
            var AccountID = $("#ddlaccountname option:selected").val();
            var movementID = $("#ddlExportDl option:selected").text();
            var ContainerID = $("#ddlcontainertype option:selected").text();
            if (ContainerID == "--Select-- ") {
                ContainerID = '';
            }
            if (movementID == "--Select-- ") {
                movementID = '';
            }

            data1 = { 'TraiffID': TraiffID, 'AccountID': AccountID, 'ContainerID': ContainerID, 'movementID': movementID };
            data = JSON.stringify(data1);

          
            $.ajax({
                type: 'POST',
                url: '/UpdateDischarge/GetExportTraiffDetails',
                data: data,

                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: true,
                success: function (data) {

                    $("#example2").empty(data);
                    RepTableDataJson($("#example2"), data, "Traiff Details", "TraiffDetails_list");
                    $("#tracker-loader").fadeOut("slow");
                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                    $("#tracker-loader").fadeOut("slow");
                }
            });
        }
        if (SearchNO == "Bond") {
            var TraiffID = $("#DDlBondTraiff option:selected").val();
            var AccountID = $("#ddlaccountname option:selected").val();
            var movementID = $("#ddlBond option:selected").val();
            if (movementID == "--Select-- ") {
                movementID = '';
            }

            data1 = { 'TraiffID': TraiffID, 'AccountID': AccountID, 'movementID': movementID };
            data = JSON.stringify(data1);
            alert(data);
           
            $.ajax({
                type: 'POST',
                url: '/UpdateDischarge/GetBondTraiffDetails',
                data: data,

                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: true,
                success: function (data) {

                    $("#example2").empty(data);
                    RepTableDataJson($("#example2"), data, "Traiff Details", "TraiffDetails_list");
                    $("#tracker-loader").fadeOut("slow");
                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                    $("#tracker-loader").fadeOut("slow");
                }
            });

        }
        if (SearchNO == "Domestic") {
            var TraiffID = $("#DDlDomesticTraiff option:selected").val();
            var AccountID = $("#ddlaccountname option:selected").val();
            var movementID = $("#DDlDomistic option:selected").val();
            if (movementID == "--Select-- ") {
                movementID = '';
            }

            data1 = { 'TraiffID': TraiffID, 'AccountID': AccountID, 'movementID': movementID };
            data = JSON.stringify(data1);
            alert(data);

            $.ajax({
                type: 'POST',
                url: '/UpdateDischarge/GetDomesticTraiffDetails',
                data: data,

                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: true,
                success: function (data) {

                    $("#example2").empty(data);
                    RepTableDataJson($("#example2"), data, "Traiff Details", "TraiffDetails_list");
                    $("#tracker-loader").fadeOut("slow");
                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                    $("#tracker-loader").fadeOut("slow");
                }
            });

        }


       
    }
</script>


<script>
    function validateSaveFunction() {

        var txtdrivername = document.getElementById('ddltariffDescription').value;
    
        var blResult = Boolean;
        blResult = true;
        

        document.getElementById("ddltariffDescription").style.borderColor = "gainsboro";
      
      
        

        if (txtdrivername == "") {
            //  document.getElementById('ContainerNo').style.borderColor = "red"
            document.getElementById("ddltariffDescription").style.borderColor = "red";
            blResult = blResult && false;
        }


       
       
        if (blResult == false) { alert('Please fill the required fields!'); }
        return blResult;

    };
</script>
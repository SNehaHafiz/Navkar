@model TrackerMVCEntities.BusinessEntities.VehicleInOutDetails
@{
    ViewBag.Title = "Vehicle In Out Entry";
    Layout = "~/Views/Shared/_LayoutDashboard.cshtml";
}



<div class=" content-area" id="diventrytable">
    <div class="page-header">
        <h4 class="page-title">Vehicle In & Out Entry</h4>
        <div class="form-group">
            <label class="form-label"></label>
            <div class="row gutters-xs">
                <div class="col">

                    <button type="button" class="btn btn-icon btn-teal" name="summarylist" title="Summary list" id="summarylist" onclick="ViewSummaryVehicle();"><i class="fa fa-file-text"></i></button>


                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 col-lg-12">
            <div class="card">
                <div class="card-body">
                    <div class="form-horizontal">
                        <div class="row">
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label">Activity Entry ID</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.Editor("ActivityEntryID", new { htmlAttributes = new { @class = "form-control", @id = "ActivityEntryID", @readonly = "readonly", @placeholder = "New_ID" } })


                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label">Activity Date</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @*@Html.Editor("ActivityDate", new { htmlAttributes = new { @class = "form-control form_datetime1", @id = "ActivityDate", @Value = DateTime.Now.ToString("dd MMM yyyy 07:59") } })*@
                                            @Html.Editor("ActivityDate", new { htmlAttributes = new { @class = "form-control ", @id = "ActivityDate", @Value = DateTime.Now.ToString("dd MMM yyyy HH:mm"), @readonly = true } })


                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label mandatory">Trailer No(Last 4 digits)</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.TextBox("txtTrailerno", null, new { @class = "form-control", @id = "Trailerno", name = "Trailerno", autocomplete = "off", placeholder = "Trailer No", @maxlength = 4 })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12" id="divtrailernodrop">
                                <label class="form-label">Trailer No </label>
                                <select id="ddlTrailerNo" class="form-control">
                                    <option value="">--Select--</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label">Activity</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @* @Html.DropDownListFor(model => model.Size, (IEnumerable<SelectListItem>)ViewBag.ContainerSize, "--Select--", new { @class = "form-control", @id = "ddlSize", name = "Size", onblur = "myRequiredValidation('ddlSize')" })*@
                                            @Html.DropDownList("Activity",
                                                                      (IEnumerable<SelectListItem>)ViewBag.Activity,
                                                             "--Select--",
                                                    new { @class = "form-control" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label mandatory">Movement Type</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.DropDownList("ddlINOUT", new List<SelectListItem>
                    { new SelectListItem { Text = "--Select--", Value = ""},
                      new SelectListItem { Text = "I", Value = "I"},
                      new SelectListItem { Text = "O", Value = "O"},
                      new SelectListItem { Text = "E", Value = "E"},

                      }, new { @class = "form-control ", autocomplete = "off" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label mandatory">Activity Cycle</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.DropDownList("ddlactivitycycle",
                                                                                                                  (IEnumerable<SelectListItem>)ViewBag.Activitycycle,
                                                                                                         "--Select--",
                                                                                                new { @class = "form-control" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label mandatory">Container Type</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.DropDownList("ddlContainerType",
                                                                                                                    (IEnumerable<SelectListItem>)ViewBag.Containertype,
                                                                                                           "--Select--",
                                                                                                  new { @class = "form-control" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label mandatory"> Container Count</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @* @Html.DropDownListFor(model => model.Size, (IEnumerable<SelectListItem>)ViewBag.ContainerSize, "--Select--", new { @class = "form-control", @id = "ddlSize", name = "Size", onblur = "myRequiredValidation('ddlSize')" })*@
                                            @Html.DropDownList("ddlcontainercount",
                                                                      (IEnumerable<SelectListItem>)ViewBag.ContainerCount,
                                                             "--Select--",
                                                    new { @class = "form-control" })


                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12" id="CountainerNo1" style="display:none">
                                <div class="form-group">
                                    <label class="form-label">Container 1</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.Editor("txtContainer1", new { htmlAttributes = new { @class = "form-control", @id = "txtContainer1", @maxlength = "11" } })


                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-3 col-sm-12" id="CountainerNo2" style="display:none">
                                <div class="form-group">
                                    <label class="form-label">Container 2</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.Editor("TxtContainer2", new { htmlAttributes = new { @class = "form-control", @id = "TxtContainer2" , @maxlength = "11"  } })


                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label">From Location</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @* @Html.DropDownListFor(model => model.Size, (IEnumerable<SelectListItem>)ViewBag.ContainerSize, "--Select--", new { @class = "form-control", @id = "ddlSize", name = "Size", onblur = "myRequiredValidation('ddlSize')" })*@
                                            @Html.DropDownList("FromLocation",
                                                                               (IEnumerable<SelectListItem>)ViewBag.Location,
                                                             "--Select--",
                                                    new { @class = "form-control" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label">To Location</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @* @Html.DropDownListFor(model => model.Size, (IEnumerable<SelectListItem>)ViewBag.ContainerSize, "--Select--", new { @class = "form-control", @id = "ddlSize", name = "Size", onblur = "myRequiredValidation('ddlSize')" })*@
                                            @Html.DropDownList("ToLocation", (IEnumerable<SelectListItem>)ViewBag.Location, "--Select--",
                                                    new { @class = "form-control" })
                                        </div>
                                    </div>
                                </div>
                            </div>

                          
                        </div>

                        <div class="row">
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label">Party</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.Editor("Party", new { htmlAttributes = new { @class = "form-control", @id = "Party" } })


                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label">Remarks</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.Editor("remarks", new { htmlAttributes = new { @class = "form-control", @id = "remarks" } })


                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-1 col-xs-4">
                                <div class="form-group">
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            <button class="btn btn-success" id="Save" onclick="Save();">Save</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class=" content-area overflow-hidden" id="DivSummary" style="display:none">
    <div class="page-header">
        <h4 class="page-title">Vehicle In & Out Entry Summary</h4>
        <div class="ibox-content  text-right">
            <a onclick="getBack();" class="btn btn-primary btn-success" style="color:white;align-content:center;"><i class="fa fa-arrow-left" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Back"></i>  </a></li>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 col-lg-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">

                        <div class="col-lg-12 col-sm-12">
                            <div class="form-group">
                                <div class="row gutters-xs">
                                    <div class="col-md-2 col-lg-2">
                                        <div class="form-group label-floating">
                                            <label class="form-label">From</label>
                                            @Html.TextBox("FromDate", null, new { @id = "FromDate", @class = "form-control form_datetime1", @Value = DateTime.Now.AddDays(-1).ToString("dd MMM yyyy 08:00") })
                                        </div>
                                    </div>
                                    <div class="col-md-2 col-lg-2">
                                        <div class="form-group label-floating">
                                            <label class="form-label">To</label>
                                            @Html.TextBox("ToDate", null, new { @id = "ToDate", @class = "form-control form_datetime1", @Value = DateTime.Now.ToString("dd MMM yyyy 08:00") })
                                        </div>
                                    </div>


                                    <div class="col-md-22 col-lg-2">
                                        <div class="form-group label-floating" style="margin-top: 33px;">
                                            <button class=" btn btn-primary" style="margin-top: -7px" id="btnSearch" onclick="Show('SHOW')" type="button">
                                                SHOW
                                            </button>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>



                    </div>
                    <div class="row">
                        <div class="col-lg-2 col-sm-12" id="divTEUS" style="display:none">
                            <div class="form-group">
                                <div class="row gutters-xs">
                                    <div class="col">
                                        <span style="font-weight: bold"> 20 :</span> <label id="lbltwenty" style="font-weight: bold"></label>

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-2 col-sm-12" id="divTEUS1" style="display:none">
                            <div class="form-group">
                                <div class="row gutters-xs">
                                    <div class="col">
                                        <span style="font-weight: bold"> 40's :</span> <label id="lblforty" style="font-weight: bold"></label>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-sm-12" id="divTEUS2" style="display:none">
                            <div class="form-group">
                                <div class="row gutters-xs">
                                    <div class="col">
                                        <span style="font-weight: bold"> 45's :</span> <label id="lblfortyfive" style="font-weight: bold"></label>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-sm-12" id="divTEUS3" style="display:none">
                            <div class="form-group">
                                <div class="row gutters-xs">
                                    <div class="col">
                                        <span style="font-weight: bold"> TEUS :</span>   <label id="lblTotal" style="font-weight: bold"></label>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="row">
                        <div class="col-md-12 col-lg-12">

                            <div class="table-responsive">
                                <table class="table table-bordered table-hover tbl-cart text-nowrap" id="reportTable" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th>Activity Date.</th>
                                            <th>Vehicle No.</th>
                                            <th>From Location</th>
                                            <th>To Location</th>
                                            <th>Activity</th>
                                            <th>Party Name</th>
                                            <th>Added By</th>
                                            <th>Container Count</th>
                                            <th>Status</th>
                                            <th>Container No.</th>
                                            <th>Activity Cycle</th>
                                
                                        </tr>
                                    </thead>
                                    <tbody style="box-sizing :border-box;"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




<div class=" content-area" id="divLatestSummary">
    <div class="page-header">
        <h4 class="page-title">Trailer Latest Transactions</h4>
    </div>
    <div class="row">
        <div class="col-md-12 col-lg-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">

                        <div class="table-responsive">
                            <table class="table table-bordered table-hover tbl-cart text-nowrap" id="example">
                                <thead>
                                    <tr>
                                        <th class="wd-15p sorting">Trans Date</th>
                                        <th class="wd-15p sorting">Vehicle No</th>
                                        <th class="wd-15p sorting">Container No.</th>
                                        <th class="wd-15p sorting">Status</th>
                                        <th class="wd-15p sorting">Activity</th>
                                        <th class="wd-15p sorting">From Location</th>
                                        <th class="wd-15p sorting">To Location</th>
                                    </tr>
                                </thead>

                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function Save() {

        var res = validate();
        if (res == false) {
            return false;
        }
      
        var TrailerNo = $("#ddlTrailerNo option:selected").text();
        var INout = $("#ddlINOUT option:selected").val();
       
        data1 = { 'TrailerNo': TrailerNo, 'INout': INout }
        data = JSON.stringify(data1);
        $.ajax({
            type: 'POST',
            url: '/UpdateDischarge/CheckTrailerStatusMovementType',
            data: data,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: true,
            success: function (data) {

                if (data == '0') {
                    SaveDetails();
                } else {
                    alert(data);
                    //SaveDetails();
                }

            },
            error: function (errormessage) {
                alert(errormessage.responseText);
             
            }
        });
       
         
    }


    function SaveDetails() {
        var ActivityDate    = $("#ActivityDate").val();
        var ActivityName    = $("#Activity option:selected").val();
        var FromLocation    = $("#FromLocation option:selected").val();
        var ToLocation      = $("#ToLocation option:selected").val();
        var party           = $("#Party").val();
        var Remarks         = $("#remarks").val();
        var trailerid       = $("#ddlTrailerNo option:selected").text();
        var Containercount  = $("#ddlcontainercount option:selected").text();
        var INout           = $("#ddlINOUT option:selected").val();
        var ContainerNo1 = $("#txtContainer1").val();
        var ContainerNo2 = $("#TxtContainer2").val();
        var Activitycycle = $("#ddlactivitycycle").val();
        var ContainerType = $("#ddlContainerType option:selected").val();

        if (ContainerNo2 == "") {
            ContainerNo2 = "Null"
        }

     

        data1 = {
            'ActivityDate': ActivityDate, 'ActivityName': ActivityName, 'FromLocation': FromLocation, 'ToLocation': ToLocation, 'trailerid': trailerid,
            'party': party, 'Remarks': Remarks, 'Containercount': Containercount, 'INout': INout, 'ContainerNo1': ContainerNo1, 'ContainerNo2': ContainerNo2,
            'Activitycycle': Activitycycle, 'ContainerType': ContainerType
        }
        data = JSON.stringify(data1);
      

        if (FromLocation == ToLocation) {
            alert("Please select different location!")
        } else {
         $.ajax({
                url: "/UpdateDischarge/AjaxSaveVehicleInOutDetails",
                data: data,
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (result) {
                    if (JSON.stringify(result) == 0) {
                        alert('Fuel Entry already exist! ')
                    }
                    else {
                        alert('Record saved successfully');
                        var r = confirm("Do you want to print?");
                        if (r == true) {
                            $.ajax({
                                url: "/UpdateDischarge/PrintVehicleInout",
                                // data: data,
                                type: "POST",
                                contentType: "application/json; charset=utf-8",
                                // dataType: "json",
                                success: function (response) {

                                    var myWindow = window.open("", "MsgWindow1");
                                    myWindow.close();
                                    var myWindow = window.open("", "MsgWindow1");
                                    myWindow.document.write(response);
                                },

                                error: function (errormessage) {
                                    alert(errormessage.responseText);
                                }
                            });
                        } else {
                            window.location.href = '@Url.Action("VehicleInOutDetails", "UpdateDischarge")';
                        }
                        window.location.href = '@Url.Action("VehicleInOutDetails", "UpdateDischarge")';
                    }


                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                }
            });
        }
    }
</script>

<script>
    $('#Trailerno').change(function (e) {
        var trailerno = $("#Trailerno").val();
        $.ajax({
            url: "/ManualPortOut/AjaxGetTrailerNo",
            data: '{trailerno: ' + JSON.stringify(trailerno) + '}',
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {

                var select = $("#ddlTrailerNo");

                select.empty();
                select.append($('<option/>', {
                    value: "",
                    text: "--Select--"
                }));

                $.each(data, function (data, value) {

                    select.append($("<option></option>").val(value.trailerid).html(value.trailername));
                })

                GetVehiclelastDetails(trailerno);



            },

            error: function (errormessage) {
                alert(errormessage.responseText);
            }
        });


      

    });


    $('#ddlTrailerNo').change(function (e) {
        var Trailername = $("#ddlTrailerNo option:selected").val();
       
    $.ajax({
        url: "/UpdateDischarge/ajaxTrailerStatus",
        data: '{Trailername: ' + JSON.stringify(Trailername) + '}',
        type: "POST",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
            $("#ddlINOUT").val(data)
        },

        error: function (errormessage) {
            alert(errormessage.responseText);
        }
    });
    });
    function GetVehiclelastDetails(trailerno) {
        var data1 = { 'trailerno': trailerno };
        var data = JSON.stringify(data1);
        $.ajax({
            type: 'POST',
            data: data,
            url: '/UpdateDischarge/ajaxGetVehileoutLatestRecord',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: true,
            success: function (data) {
                //alert(JSON.stringify(data));
                $('#example').dataTable({
                    "destroy": true,
                    "bLengthChange": false,
                    "bPaginate": false,
                    //"bFilter": false,
                    "paging": false,
                    "aaData": data,
                    "columns": [
                        { "data": "TransDate" },
                        { "data": "Trailerno" },
                        { "data": "containerno" },
                        { "data": "status" },
                        { "data": "Activity" },
                        { "data": "fromid" },
                        { "data": "toid" },
                       
                    ],
                    "dom": 'Bfrtip',

                    "buttons": [{
                        "extend": 'excel',
                        "title": 'DriverDetails',
                        "filename": 'DriverDetails_List'

                    }
                    ]

                })


                $("#tracker-loader").fadeOut("slow");

            },
            error: function (errormessage) {
                alert(errormessage.responseText);
                $("#tracker-loader").fadeOut("slow");
            }
        });
    }

</script>

<script>
    function validate() {

        var activity = document.getElementById('Activity').value;
        var fromlocation = document.getElementById('FromLocation').value;
        var tolocation = document.getElementById('ToLocation').value;
        var trailerno = document.getElementById('Trailerno').value;
        var trailerdropdown = document.getElementById('ddlTrailerNo').value;
        var party = document.getElementById('Party').value;
       // var CountryCount = document.getElementById('ddlcontainercount').text;
        var CountryCount = $("#ddlcontainercount option:selected").text();
        var InOut = document.getElementById('ddlINOUT').value;
        var ContainerNo1 = document.getElementById('txtContainer1').value;
        var ContainerNo2 = document.getElementById('TxtContainer2').value;
        var Activitycycle = document.getElementById('ddlactivitycycle').value;
     

        var blResult = Boolean;
        blResult = true;

        document.getElementById("Activity").style.borderColor = "gainsboro";
        document.getElementById("FromLocation").style.borderColor = "gainsboro";
        document.getElementById("ToLocation").style.borderColor = "gainsboro";
        document.getElementById("Trailerno").style.borderColor = "gainsboro";
        document.getElementById("ddlTrailerNo").style.borderColor = "gainsboro";
        document.getElementById("Party").style.borderColor = "gainsboro";
        document.getElementById("ddlcontainercount").style.borderColor = "gainsboro";
        document.getElementById("ddlINOUT").style.borderColor = "gainsboro";
        document.getElementById("txtContainer1").style.borderColor = "gainsboro";
        document.getElementById("TxtContainer2").style.borderColor = "gainsboro";
        document.getElementById("ddlactivitycycle").style.borderColor = "gainsboro";

        if (CountryCount == "1 X 20") {
            if (ContainerNo1 == "") {
                document.getElementById("txtContainer1").style.borderColor = "red";
                blResult = blResult && false;
            }
        }
        if (Activitycycle == "") {
            if (ContainerNo1 == "") {
                document.getElementById("ddlactivitycycle").style.borderColor = "red";
                blResult = blResult && false;
            }
        }

        if (CountryCount == "1 X 40") {
            if (ContainerNo1 == "") {
                document.getElementById("txtContainer1").style.borderColor = "red";
                blResult = blResult && false;
            }
        }

        if (CountryCount == "2 X 20") {
            if (ContainerNo1 == "") {
                document.getElementById("txtContainer1").style.borderColor = "red";
                blResult = blResult && false;
            }

            if (ContainerNo2 == "") {
                document.getElementById("TxtContainer2").style.borderColor = "red";
                blResult = blResult && false;
            }
        }


        if (activity == "") {
            //  document.getElementById('ContainerNo').style.borderColor = "red"
            document.getElementById("Activity").style.borderColor = "red";
            blResult = blResult && false;
        }
        if (fromlocation == "--Select--") {
            //  document.getElementById('ContainerNo').style.borderColor = "red"
            document.getElementById("FromLocation").style.borderColor = "red";
            blResult = blResult && false;
        }
        if (fromlocation == "") {
            //  document.getElementById('ContainerNo').style.borderColor = "red"
            document.getElementById("FromLocation").style.borderColor = "red";
            blResult = blResult && false;
        }
        if (tolocation == "") {
            //  document.getElementById('ContainerNo').style.borderColor = "red"
            document.getElementById("ToLocation").style.borderColor = "red";
            blResult = blResult && false;
        }
        if (trailerno == "") {
            //  document.getElementById('ContainerNo').style.borderColor = "red"
            document.getElementById("Trailerno").style.borderColor = "red";
            blResult = blResult && false;
        }
        if (trailerdropdown == "") {
            //  document.getElementById('ContainerNo').style.borderColor = "red"
            document.getElementById("ddlTrailerNo").style.borderColor = "red";
            blResult = blResult && false;
        }
        if (party == "") {
            //  document.getElementById('ContainerNo').style.borderColor = "red"
            document.getElementById("Party").style.borderColor = "red";
            blResult = blResult && false;
        }
        if (CountryCount == "") {
            //  document.getElementById('ContainerNo').style.borderColor = "red"
            document.getElementById("ddlcontainercount").style.borderColor = "red";
            blResult = blResult && false;
        }
        if (InOut == "") {
            //  document.getElementById('ContainerNo').style.borderColor = "red"
            document.getElementById("ddlcontainercount").style.borderColor = "red";
            blResult = blResult && false;
        }



        if (blResult == false) { alert('Please fill the required fields!'); }
        return blResult;
    }
</script>

<script>
    function ViewSummaryVehicle() {
        $("#diventrytable").hide();
        $("#divLatestSummary").hide();
        $("#DivSummary").show();
    }


    function getBack() {
        $("#diventrytable").show();
        $("#DivSummary").hide();
        $("#divLatestSummary").show();
    }


    function Show() {
        var fromdate = $("#FromDate").val();
        var todate = $("#ToDate").val();
        var data1 = {  'FromDate': fromdate, 'ToDate': todate };
        var data = JSON.stringify(data1);
        //alert(data);
        $.ajax({
            url: '/UpdateDischarge/GetVehicleInoutSummary',
            type: 'Post',
            data: data,
            async: false,
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
             
                $('#reportTable').dataTable({
                    "destroy": true,
                    "bLengthChange": false,
                    "aaData": data,
                    "bInfo": false,
                    "bPaginate": false,
                    "bFilter": true,
                    "paging": false,
                    "order": [],

                    "columns": [
                        {
                            "data": "SrNo",
                            "render": function (data, type, row, meta) {
                                if (type === 'display') {

                                    data = '<a   href="#" class="' + row.btnClass + '" title="Print" onclick="Print(' + row.SrNo + ')">Print</a>';
                                }

                                return data;
                            }
                        },

                        { "data": "ActivityDate" },
                        { "data": "VehicleNo" },
                        { "data": "FromLocation" },
                        { "data": "ToLocation" },
                        { "data": "Activity" },
                        { "data": "PartyName" },
                        { "data": "UserName" },
                        { "data": "Containercount" },
                        { "data": "Inout" },
                        { "data": "ContainerNo" },
                        { "data": "ActivityCycle" },
                    ],

                    "dom": 'Bfrtip',
                    "buttons": [{
                        "extend": 'excel',
                        "title": function () {
                            var title = 'Vehicle In & Out Summary';
                            return title;
                        },

                        "filename": 'VehicleInOutSummary_List'

                    }]

                });



            },
            error: function (errormessage) {
                alert(errormessage.responseText);
            }


        });


    }

    function Print(SrNo) {
        //alert(SrNo);
        var data1 = { 'Entryid': SrNo };
       // alert(JSON.stringify(data1));
        var data = JSON.stringify(data1);
        $.ajax({
            url: "/UpdateDischarge/RePrintVehicleInout",
            data: data,
            type: "POST",
            contentType: "application/json; charset=utf-8",
            // dataType: "json",
            success: function (response) {

                var myWindow = window.open("", "MsgWindow1");
                myWindow.close();
                var myWindow = window.open("", "MsgWindow1");
                myWindow.document.write(response);
            },

            error: function (errormessage) {
                alert(errormessage.responseText);
            }

            
        });

        Show();

    }
</script>

<script>
    $('#ddlcontainercount').change(function (e) {
        var ContainerCount = $("#ddlcontainercount option:selected").text();

        if (ContainerCount == "2 X 20") {
            $("#TxtContainer2").val('')
            $("#txtContainer1").val('')
            $("#CountainerNo1").show();
            $("#CountainerNo2").show();
        }
        if (ContainerCount == "1 X 20" || ContainerCount == "1 X 40") {
            $("#TxtContainer2").val('')
            $("#txtContainer1").val('')
            $("#CountainerNo1").show();
            $("#CountainerNo2").hide();
        }
        if (ContainerCount == "PL") {
            $("#TxtContainer2").val('')
            $("#txtContainer1").val('')
            $("#CountainerNo1").hide();
            $("#CountainerNo2").hide();
        }
      



    });
</script>
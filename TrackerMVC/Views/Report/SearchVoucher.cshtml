
@{
    ViewBag.Title = "Search Voucher";
    Layout = "~/Views/Shared/_LayoutDashboard.cshtml";
}


<div class=" content-area" id="divSummary">
    <div class="page-header">
        <h4 class="page-title">Search Voucher</h4>
    </div>
    <div class="row">
        <div class="col-md-12 col-lg-12">
            <div class="card">
                <div class="card-body">
                    <div class="form-horizontal">
                        <div class="row">
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label">Search By </label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.DropDownList("ddlSeachby", new List<SelectListItem>
                         { new SelectListItem { Text = "--Select--", Value = ""},
                           new SelectListItem { Text = "Voucher NO", Value = "Voucher NO"},
                           new SelectListItem { Text = "Slip No", Value = "Slip No"},
                           new SelectListItem { Text = "Container No", Value = "Container No"},
                           new SelectListItem { Text = "Trailer No", Value = "Trailer No"},
                           new SelectListItem { Text = "TP NO", Value = "TP NO"},
                           }, new { @class = "form-control", autocomplete = "off" })
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label mandatory" id="lblshow"></label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            <input id="txtNumber" type="text" class="form-control" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12" id="divallfrom">
                                <div class="form-group">
                                    <label class="form-label">From Date</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.TextBox("FromDate", null, new { @class = "form-control form_datetime1", @Value = DateTime.Now.ToString("dd MMM yyyy 08:00") })

                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12" id="divtrailerhide" style="display:none">
                                <div class="form-group">
                                    <label class="form-label">From Date</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.TextBox("FromDatetrailer", null, new { @class = "form-control form_datetime1", @Value = DateTime.Now.AddDays(-1).ToString("dd MMM yyyy 08:00") })

                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-2 col-sm-12" style="display:none" id="divtolocation">
                                <div class="form-group">
                                    <label class="form-label">To Date</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            @Html.TextBox("Todate", null, new { @class = "form-control form_datetime1", @Value = DateTime.Now.ToString("dd MMM yyyy 08:00") })

                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-1 col-sm-12" id="divall">
                                <div class="form-group">
                                    <label class="form-label" style="visibility:hidden">.</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            <input type="button" id="btnShow" value="Show" class="btn btn-primary" onclick="showMovementdetails()" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-1 col-sm-12" style="display:none" id="divTP">
                                <div class="form-group">
                                    <label class="form-label" style="visibility:hidden">.</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            <input type="button" id="btnShow" value="Show" class="btn btn-primary" onclick="showTPdetailsdetails()" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-1 col-sm-12" style="display:none" id="divTrailer">
                                <div class="form-group">
                                    <label class="form-label" style="visibility:hidden">.</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            <input type="button" id="btnShow" value="Show" class="btn btn-primary" onclick="showtrailerdetailsdetails()" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                       
                    </div>
                    <div class="form-group">
                        <label class="form-label"></label>
                        <div class="input-group">

                            <span class="input-group-append " id="tabPurpose">
                                <button class="btn btn-primary active" id="export" style="text-transform: uppercase;" type="button" onclick="ShowMovementDetails()">Movement Details</button>
                                <button class="btn btn-primary" id="export" style="text-transform: uppercase;" type="button" onclick="ShowTpDetails()">TP Details </button>
                                <label id="selectedImportORExport" class="display_none"></label>
                            </span>
                        </div><br />

                        <div class="row" id="divMovementDetailsDetails">
                            <div class="table-responsive">
                                <table class="table table-bordered table-hover tbl-cart text-nowrap" id="example1">
                                    <thead>
                                        <tr>
                                            <th class="wd-15p sorting">Voucher No.</th>
                                            <th class="wd-15p sorting">Voucher Date</th>
                                            <th class="wd-15p sorting">Slip No.</th>
                                            <th class="wd-15p sorting">Full Slip Vendor Bill No</th>
                                            <th class="wd-15p sorting">Cash Payment Trans ID</th>
                                            <th class="wd-15p sorting">Trailer No.</th>
                                            <th class="wd-15p sorting">In Out</th>
                                            <th class="wd-15p sorting">Status</th>
                                            <th class="wd-15p sorting">Container No.</th>
                                            <th class="wd-15p sorting">Size</th>
                                            <th class="wd-15p sorting">Driver name</th>
                                            <th class="wd-15p sorting">Activity</th>
                                            <th class="wd-15p sorting">Amount Cash</th>
                                            <th class="wd-15p sorting">Amount Bank</th>
                                            <th class="wd-15p sorting">Fuel</th>
                                            <th class="wd-15p sorting">Adjustments Fuel</th>
                                            <th class="wd-15p sorting">Customer Name</th>
                                            <th class="wd-15p sorting">Customer Address</th>
                                            <th class="wd-15p sorting">Trolly Size</th>
                                            <th class="wd-15p sorting">From Location</th>
                                            <th class="wd-15p sorting">To Location</th>
                                            <th class="wd-15p sorting">Start Reading</th>
                                            <th class="wd-15p sorting">End Reading</th>
                                            <th class="wd-15p sorting">Entry Type</th>


                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>

                        <div class="row" style="display:none" id="divTPDetails">
                            <div class="table-responsive">
                                <table class="table table-bordered table-hover tbl-cart text-nowrap" id="example5">
                                    <thead>
                                        <tr>
                                            <th class="wd-15p sorting">TP No</th>
                                            <th class="wd-15p sorting">TP Date</th>
                                            <th class="wd-15p sorting">Trailer NO.</th>
                                            <th class="wd-15p sorting">Driver name</th>
                                            <th class="wd-15p sorting">TP Location</th>
                                            <th class="wd-15p sorting">TP FOr</th>
                                            <th class="wd-15p sorting">Amount</th>
                                            <th class="wd-15p sorting">IS Approved</th>
                                            <th class="wd-15p sorting">Added By</th>
                                           

                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">

    $(document).ready(function () {
        $('#example1').DataTable({
            "bLengthChange": false,
            "bInfo": false,
            "bPaginate": false,
            //"bFilter": false,
            "paging": false

        });

        $('#example4').DataTable({
            "bLengthChange": false,
            "bInfo": false,
            "bPaginate": false,
            //"bFilter": false,
            "paging": false

        });
        $('#example5').DataTable({
            "bLengthChange": false,
            "bInfo": false,
            "bPaginate": false,
            //"bFilter": false,
            "paging": false

        });
        $("#lblshow").text("Number");
    });
</script>
<script>
    $('#ddlSeachby').change(function (e) {
        var SearchNO = $("#ddlSeachby").val();
       // alert(SearchNO);
        if (SearchNO == "Voucher NO") {
            $("#lblshow").text("Voucher No.");
            $("#divtolocation").hide();
            $("#divall").show();
            $("#divTP").hide();
            $("#divTrailer").hide();
            $("#divtrailerhide").hide();
            $("#divallfrom").show();
        }
        if (SearchNO == "Slip No") {
            $("#lblshow").text("Slip No");
            $("#divtolocation").hide();
            $("#divall").show();
            $("#divTP").hide();
            $("#divTrailer").hide();
            $("#divtrailerhide").hide();
            $("#divallfrom").show();
        }
        if (SearchNO == "Container No") {
            $("#lblshow").text("Container No");
            $("#divtolocation").hide();
            $("#divall").show();
            $("#divTP").hide();
            $("#divTrailer").hide();
            $("#divtrailerhide").hide();
            $("#divallfrom").show();
        }
        if (SearchNO == "Trailer No") {
            $("#lblshow").text("Trailer No");
            $("#divtolocation").show();
            $("#divall").hide();
            $("#divTP").hide();
            $("#divTrailer").show();
            $("#divtrailerhide").show();
            $("#divallfrom").hide();
        }
        if (SearchNO == "TP NO") {
            $("#lblshow").text("TP NO");
            $("#divtolocation").hide();
            $("#divall").hide();
            $("#divTP").show();
            $("#divTrailer").hide();
            $("#divtrailerhide").hide();
            $("#divallfrom").show();
        }

    });
    


</script>
<script>

    function ShowMovementDetails() {
        $("#divTPDetails").hide();
        $("#divMovementDetailsDetails").show();
    }
    function ShowTpDetails() {
        $("#divTPDetails").show();
        $("#divMovementDetailsDetails").hide();
    }
</script>
<script type="text/javascript">

    function showMovementdetails() {
     
        var SearchNO1 = $("#ddlSeachby").val();
        var Number = $("#txtNumber").val();
        var VoucherNo = "";
        var SlipNo = "";
        var Containerno = "";
        var TrailerNo = "";

        if (SearchNO1 == "Voucher NO") {

            var data1 = { 'VoucherNo': Number, 'SlipNo': SlipNo, 'Containerno': Containerno, 'TrailerNo': TrailerNo };
           var  data = JSON.stringify(data1);
           
        }
        if (SearchNO1 == "Slip No") {
            var data1 = { 'VoucherNo': VoucherNo, 'SlipNo': Number, 'Containerno': Containerno, 'TrailerNo': TrailerNo };
            var  data = JSON.stringify(data1);
        }
        if (SearchNO1 == "Container No") {
            var data1 = { 'VoucherNo': VoucherNo, 'SlipNo': SlipNo, 'Containerno': Number, 'TrailerNo': TrailerNo };
            var data = JSON.stringify(data1);
        }
        if (SearchNO1 == "Trailer No") {
            var data1 = { 'VoucherNo': VoucherNo, 'SlipNo': SlipNo, 'Containerno': Containerno, 'TrailerNo': Number };
            var  data = JSON.stringify(data1);
        }
     
     
        $.ajax({
            url: "/Report/AjaxGetMovementDetail",
            data: data,
            type: "POST",
            contentType: "application/json; charset=utf-8",
            async: true,
            dataType: "json",
            success: function (data) {
                $('#example1').dataTable({
                    "destroy": true,
                    "bLengthChange": false,
                    "aaData": data,
                    "bInfo": false,
                    "bPaginate": false,
                    "bFilter": true,
                    "paging": false,
                    "dom": 'Bfrtip',
                    "buttons": [{
                        "extend": 'excel',
                        "title": 'VoucherDetails',
                        "filename": 'VoucherDetails_List'

                    }
                    ],
                    "columns": [

                        { "data": "VoucherNO" },
                        { "data": "VoucherDate" },
                        { "data": "SlipNo" },
                        { "data": "FullSlipVendorBillNo" },
                        { "data": "CashPaymentTransID" },
                        { "data": "TrailerNo" },
                        { "data": "InOut" },
                        { "data": "Status" },
                        { "data": "ContainerNo" },
                        { "data": "Size" },
                        { "data": "Drivername" },
                        { "data": "Activity" },
                        { "data": "AmountCash" },
                        { "data": "AmountBank" },
                        { "data": "Fuel" },
                        { "data": "AdjustmentsFuel" },
                        { "data": "CustomerName" },
                        { "data": "CustomerAddress" },
                        { "data": "TrollySize" },
                        { "data": "FromLocation" },
                        { "data": "ToLocation" },
                        { "data": "StartReading" },
                        { "data": "EndReading" },
                        { "data": "ENTRY_Type" },


                    ]
                });

            },

            error: function (errormessage) {
                alert(errormessage.responseText);
            }
        });
    }



    function showTPdetailsdetails() {
        $("#divTPDetails").show();
        $("#divMovementDetailsDetails").hide();
        var TpNumber = $("#txtNumber").val();
        var data1 = { 'TpNumber': TpNumber };
        var data = JSON.stringify(data1);
        $.ajax({
            url: "/Report/AjaxGetTPClosedetails",
            data: data,
            type: "POST",
            contentType: "application/json; charset=utf-8",
            async: true,
            dataType: "json",
            success: function (data) {
                $('#example5').dataTable({
                    "destroy": true,
                    "bLengthChange": false,
                    "aaData": data,
                    "bInfo": false,
                    "bPaginate": false,
                    "bFilter": true,
                    "paging": false,
                    "dom": 'Bfrtip',
                    "buttons": [{
                        "extend": 'excel',
                        "title": 'VoucherDetails',
                        "filename": 'VoucherDetails_List'

                    }
                    ],
                    "columns": [

                        { "data": "TPNO" },
                        { "data": "TPdate" },
                        { "data": "trailername" },
                        { "data": "drivername" },
                        { "data": "TPLocation" },
                        { "data": "TPfor" },
                        { "data": "amount" },
                        { "data": "ISApproved" },
                        { "data": "AddedBy" },



                    ]
                });

            },

            error: function (errormessage) {
                alert(errormessage.responseText);
            }
        });
    }




    function showtrailerdetailsdetails() {
        var TrailerNo = $("#txtNumber").val();
        var fromdate = $("#FromDatetrailer").val();
        var Todate = $("#Todate").val();
        var data1 = { 'TrailerNo': TrailerNo, 'fromdate': fromdate, 'Todate': Todate};
        var data = JSON.stringify(data1);
       
        $.ajax({
            url: "/Report/AjaxGetTrailerMovementDetail",
            data: data,
            type: "POST",
            contentType: "application/json; charset=utf-8",
            async: true,
            dataType: "json",
            success: function (data) {
                $('#example1').dataTable({
                    "destroy": true,
                    "bLengthChange": false,
                    "aaData": data,
                    "bInfo": false,
                    "bPaginate": false,
                    "bFilter": true,
                    "paging": false,
                    "dom": 'Bfrtip',
                    "buttons": [{
                        "extend": 'excel',
                        "title": 'VoucherDetails',
                        "filename": 'VoucherDetails_List'

                    }
                    ],
                    "columns": [

                        { "data": "VoucherNO" },
                        { "data": "VoucherDate" },
                        { "data": "SlipNo" },
                        { "data": "FullSlipVendorBillNo" },
                        { "data": "CashPaymentTransID" },
                        { "data": "TrailerNo" },
                        { "data": "InOut" },
                        { "data": "Status" },
                        { "data": "ContainerNo" },
                        { "data": "Size" },
                        { "data": "Drivername" },
                        { "data": "Activity" },
                        { "data": "AmountCash" },
                        { "data": "AmountBank" },
                        { "data": "Fuel" },
                        { "data": "AdjustmentsFuel" },
                        { "data": "CustomerName" },
                        { "data": "CustomerAddress" },
                        { "data": "TrollySize" },
                        { "data": "FromLocation" },
                        { "data": "ToLocation" },
                        { "data": "StartReading" },
                        { "data": "EndReading" },
                        { "data": "ENTRY_Type" },


                    ]
                });

            },

            error: function (errormessage) {
                alert(errormessage.responseText);
            }
        });

        var TrailerNumber = $("#txtNumber").val();
       
        var data11 = { 'TrailerNumber': TrailerNumber};
        var data1 = JSON.stringify(data11);

        $.ajax({
            url: "/Report/AjaxGetTrailerTPClosedetails",
            data: data1,
            type: "POST",
            contentType: "application/json; charset=utf-8",
            async: true,
            dataType: "json",
            success: function (data) {
                $('#example5').dataTable({
                    "destroy": true,
                    "bLengthChange": false,
                    "aaData": data,
                    "bInfo": false,
                    "bPaginate": false,
                    "bFilter": true,
                    "paging": false,
                    "dom": 'Bfrtip',
                    "buttons": [{
                        "extend": 'excel',
                        "title": 'VoucherDetails',
                        "filename": 'VoucherDetails_List'

                    }
                    ],
                    "columns": [

                        { "data": "TPNO" },
                        { "data": "TPdate" },
                        { "data": "trailername" },
                        { "data": "drivername" },
                        { "data": "TPLocation" },
                        { "data": "TPfor" },
                        { "data": "amount" },
                        { "data": "ISApproved" },
                        { "data": "AddedBy" },



                    ]
                });

            },

            error: function (errormessage) {
                alert(errormessage.responseText);
            }
        });
    }
</script>



@{
    ViewBag.Title = "DomestichubLorryReciept";
    Layout = "~/Views/Shared/_LayoutDashboard.cshtml";
}
<style>
    .table thead th, .text-wrap table thead th {
        background-color: #9f78ff;
        color: white;
    }
</style>

<script src="~/js/GetTableJsonwopaging.js"></script>
<div class=" content-area overflow-hidden" id="DivReceiptGenDet">
    <div class="page-header">
        <h4 class="page-title">Domestic Hub Lorry Reciept</h4>
        <div class="form-group">
            <label class="form-label"></label>
            <div class="row gutters-xs">
                <div class="col">

                    <button type="button" class="btn btn-icon btn-teal" name="summarylist" title="Summary list" id="summarylist" onclick="showView();"><i class="fa fa-file-text"></i></button>
                    <br />

                </div>
            </div>
        </div>
    </div>


    <div class="row">
        <div class="col-md-12 col-lg-12">
            <div class="card">
                <div class="card-body">


                    <div class="row">
                        <div class="col-lg-3 col-sm-6">
                            <div class="form-group">
                                <label class="form-label">LR No</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtLrNo", null, new { @class = "form-control ", @id = "txtLrNo", name = "txtLrNo", placeholder = "NEW", autocomplete = "off", @readonly = true })
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-3 col-sm-6" style="padding-top:26px">
                            <div class="form-group">
                                <div class="row gutters-xs">
                                    <div class="col">
                                        <button class="btn btn-primary" data-toggle="modal" data-target="#" onclick="GetAddSlabdetails()"><i class="fe fe-search"></i></button>

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-3 col-sm-12">
                            <div class="form-group">
                                <label class="form-label mandatory">LR Date</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtLrDate", null, new { @class = "form-control form_datetime1", @id = "txtLrDate", name = "txtLrDate", @readonly = true, autocomplete = "on", @Value = DateTime.Now.ToString("dd MMM yyyy hh:mm") })

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Activity Name</label>
                                <div class="row gutters-xs">
                                    <div class="col">

                                        @Html.DropDownList("ddlActivity", (IEnumerable<SelectListItem>)ViewBag.ActivityL, "--Select--", new { @class = "form-control", @id = "ddlActivity", name = "ddlActivity", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-lg-3 col-sm-6">
                            <div class="form-group">
                                <label class="form-label">BK/Tax Invoice No</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtBookingNo", null, new { @class = "form-control ", @id = "txtBookingNo", name = "txtBookingNo", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Shipping Line</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("ddlShippingLine", (IEnumerable<SelectListItem>)ViewBag.LineName, "--Select--", new { @class = "form-control", @id = "ddlShippingLine", name = "ddlShippingLine", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <div class="form-group">
                                <label class="form-label">Customer Name</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("ddlCustomer", (IEnumerable<SelectListItem>)ViewBag.Customer, "--Select--", new { @class = "form-control", @id = "ddlCustomer", name = "ddlCustomer", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-6" style="display:none">
                            <div class="form-group">
                                <label class="form-label">Container Count</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        <select class="form-control" id="ddlContainerCount"></select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">

                        <div class="col-lg-3 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">From Location</label>
                                <div class="row gutters-xs">
                                    <div class="col">

                                        @Html.DropDownList("ddlLocation", (IEnumerable<SelectListItem>)ViewBag.Location, "--Select--", new { @class = "form-control", @id = "ddlLocation", name = "ddlLocation", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-3 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">To Location</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("ddlToLocation", (IEnumerable<SelectListItem>)ViewBag.Location, "--Select--", new { @class = "form-control", @id = "ddlToLocation", name = "ddlToLocation", autocomplete = "off" })

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-3 col-sm-6">
                            <div class="form-group">
                                <label class="form-label">Container/Batch No</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtContainerNo", null, new { @class = "form-control ", @id = "txtContainerNo", name = "txtContainerNo", autocomplete = "off", OnChange = "ContainerNo()" })
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="col-lg-1 col-sm-6">
                            <div class="form-group">
                                <label class="form-label">Type</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("ddlType", (IEnumerable<SelectListItem>)ViewBag.Type, "--Select--", new { @class = "form-control", @id = "ddlType", name = "ddlType", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-1 col-sm-6">
                            <div class="form-group">
                                <label class="form-label">Size</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        <select class="form-control" id="ddlsize">
                                            <option value="0">--Select--</option>
                                            <option value="20">20</option>
                                            <option value="40">40</option>
                                            <option value="45">45</option>

                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>

                    <div class="row">
                        <div class="col-lg-3 col-sm-12">
                            <div class="form-group">
                                <label class="form-label mandatory">Trailer No(Last 4 digits)</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtTrailerno", null, new { @class = "form-control", @id = "Trailerno", name = "Trailerno", autocomplete = "off", placeholder = "Trailer No", @maxlength = 4 })
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-3 col-sm-12" id="divtrailernodrop">
                            <label class="form-label">Trailer No </label>
                            <select id="ddlTrailerNo" class="form-control">
                                <option value="">--Select--</option>
                            </select>
                        </div>
                        <div class="col-lg-3 col-sm-6">

                            <div class="form-group">
                                <label class="form-label">Transporter </label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("ddlTransporter", (IEnumerable<SelectListItem>)ViewBag.Transporter, "--Select--", new { @class = "form-control", @id = "ddlTransporter", name = "ddlTransporter", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>
                    <div class="row">

                        <div class="col-lg-2 col-sm-6">
                            <div class="form-group">
                                <label class="form-label">Agent Seal</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtAgentSeal", null, new { @class = "form-control ", @id = "txtAgentSeal", name = "txtAgentSeal", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-sm-6">

                            <div class="form-group">
                                <label class="form-label">BOE No</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtBOENo", null, new { @class = "form-control ", @id = "txtBOENo", name = "txtBOENo", autocomplete = "off" })
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="col-lg-2 col-sm-6">

                            <div class="form-group">
                                <label class="form-label">PKGS</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtPkgs", null, new { @class = "form-control ", @id = "txtPkgs", name = "txtPkgs", autocomplete = "off" })
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="col-lg-2 col-sm-6">

                            <div class="form-group">
                                <label class="form-label">Weight(MTS)</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtWeight", null, new { @class = "form-control ", @id = "txtWeight", name = "txtWeight", autocomplete = "off" })
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="row">

                    </div>
                    <div class="row">
                        <div class="col-lg-2 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Tare Weigth</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtTareWeight", null, new { @class = "form-control ", @id = "txtTareWeight", name = "txtTareWeight", autocomplete = "off" })
                                        @*@Html.DropDownList("ddlentryType", (IEnumerable<SelectListItem>)ViewBag.EntryType, "--Select--", new { @class = "form-control", @id = "ddlentryType", name = "ddlentryType", autocomplete = "off" })*@
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-sm-6">

                            <div class="form-group">
                                <label class="form-label">Consignor Name</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtConsignee", null, new { @class = "form-control ", @id = "txtConsignee", name = "txtConsignee", autocomplete = "off" })
                                    </div>
                                </div>

                            </div>
                        </div>




                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-sm-7">

                            <div class="form-group">
                                <label class="form-label">Commodity</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtCommodity", null, new { @class = "form-control ", @id = "txtCommodity", name = "txtCommodity", autocomplete = "off" })
                                    </div>
                                </div>

                            </div>
                        </div>



                    </div>

                    <div class="row">
                        <div class="col-lg-6 col-sm-7">

                            <div class="form-group">
                                <label class="form-label">Remarks</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtRemarks", null, new { @class = "form-control ", @id = "txtRemarks", name = "txtRemarks", autocomplete = "off" })
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="col-lg-1 col-sm-12">
                            <div class="form-group">
                                <label class="form-label" style="visibility:hidden">.</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        <button id="btnSave" class="btn btn-success btn-xs" onclick="return Add();">Add</button>
                                        @*<button class="btn btn-success " type="button" id="savedetails" onclick="return Add();">Add</button>*@
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-lg-12">
                            <div>
                                @*<label class="form-label">Details </label>*@
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped table-bordered" id="example" style="width:100%">
                                    <thead>
                                        <tr>

                                            <th class="wd-15p sorting">Container No</th>
                                            <th class="wd-15p sorting">Size</th>
                                            <th class="wd-15p sorting">Type</th>
                                            <th class="wd-15p sorting">Vehicle No</th>
                                            <th class="wd-15p sorting">Agent Seal</th>
                                            <th class="wd-15p sorting">Booking No</th>
                                            <th class="wd-15p sorting">Activity</th>
                                            <th class="wd-15p sorting">From Location</th>
                                            <th class="wd-10p sorting">To Location</th>
                                            <th class="wd-10p sorting">BOE No</th>
                                            <th class="wd-10p sorting">Pkgs</th>
                                            <th class="wd-10p sorting">Weigth</th>
                                            <th class="wd-10p sorting">Tare Weight</th>
                                            <th class="wd-10p sorting">Commodity</th>
                                            <th class="wd-10p sorting">Remarks</th>
                                            @*<th type="hidden"></th>*@


                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-sm-12" style="display:none">
                        <div class="form-group">
                            <label class="form-label mandatory">Debit in Account</label>
                            <div class="row gutters-xs">
                                <div class="col">
                                    <input type="text" class="form-control" id="TxtEntryID" />
                                    <input type="hidden" class="form-control" id="lblTypeID" />
                                    <input type="hidden" class="form-control" id="txtForwarderLine" />
                                    <input type="hidden" class="form-control" id="lbllineid" />
                                    <input type="text" class="form-control" id="lblcusto" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label class="form-label" style="visibility:hidden">.</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        <button class="btn btn-success " type="button" id="savedetails" onclick="return Save();">Save</button>
                                        <button type="button" class="btn btn-icon btn-gray" name="clearProfile" title="clear" id="btnclearValue">Clear</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>


</div>

<div id="largeModal" class="modal fade">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content ">
            <div class=" content-area">
                <div class="page-header">
                    <h4 class="page-title">
                        Domestic Hub Lorry Search
                    </h4>
                </div>
                <div class="row">
                    <div class="col-md-12 col-lg-12">
                        <div class="row">
                            <div class="col-lg-3 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label" style="visibility:hidden"> No</label>
                                    <div class="row gutters-xs">
                                        <div class="col">

                                            @Html.TextBox("TXtSearchOn", null, new { @class = "form-control ", @id = "TXtSearchOn", autocomplete = "off" })

                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-2 col-sm-12">
                                <div class="form-group">
                                    <label class="form-label" style="visibility:hidden">.</label>
                                    <div class="row gutters-xs">
                                        <div class="col">
                                            <input type="button" id="btnShow" value="Show" class="btn btn-primary" onclick="GetDetailsForTariffSearch()" />

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12 col-sm-12">
                                <div class="table-responsive">
                                    <table id="example3" class="table table-bordered table-hover tbl-cart text-nowrap" style="width:100%">
                                        <thead>

                                            <tr></tr>
                                        </thead>

                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div><!-- modal-dialog -->
</div>
<script>
    function GetAddSlabdetails() {

        $("#largeModal").modal('show')
    }


    function GetDetailsForTariffSearch() {

        var Search = $("#TXtSearchOn").val();

        var data1 = { 'Search': Search };
        var data = JSON.stringify(data1);

        $.ajax({
            type: 'POST',
            data: data,
            url: "/EyardOut/GetDomesticSearch",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                $("#example3").empty();
                RepTableDataJsonwopaging($("#example3"), data, "Voucher Details", "VoucherDetails_List");
            },
            error: function (error) {
                let str = error.responseText;
                var a = str.indexOf("<title>") + 7;
                var b = str.indexOf("</title>");
                str = str.substring(a, b);
                alert("Something went wrong: " + str);
            }
        });

    }

    function SelectTariff(LRNo, ContainerNo, entryId, LRDate, BookingNo, AGID, SLID, FromLocationID, ToLocationID, Cycle,
        ContainerTypeID, AgentSeal, BOENo, Weight, TareWeight, Consignee, Stuffloc, qty, LR_Remarks, Commodity, Size) {

        $("#txtLrNo").val(LRNo);
        $("#txtContainerNo").val(ContainerNo);
        $("#txtLrDate").val(LRDate);
        $("#ddlActivity").val(Cycle);
        $("#txtBookingNo").val(BookingNo);
        $("#ddlShippingLine").val(SLID);
        $("#ddlCustomer").val(AGID);
        $("#ddlLocation").val(FromLocationID);
        $("#ddlToLocation").val(ToLocationID);

        $("#ddlType").val(ContainerTypeID);
        $("#txtAgentSeal").val(AgentSeal);
        $("#txtBOENo").val(BOENo);
        $("#txtPkgs").val(qty);
        $("#txtWeight").val(Weight);
        $("#txtTareWeight").val(TareWeight);
        $("#txtConsignee").val(Consignee);
        $("#txtCommodity").val(Commodity);
        $("#txtRemarks").val(LR_Remarks);
        $("#ddlsize").val(Size);

        $("#largeModal").modal('hide');
    }
</script>
<script>

    $('#ddlActivity').change(function (e) {
        var SearchNO = $("#ddlActivity").val();

        if (SearchNO == "13") {

            $("#ddlLocation").val(689);
            $("#ddlToLocation").val(704);
        }





    });
    $(window).on("load", function (e) {
        $("#tracker-loader").fadeOut("slow");

    })
    $('#Trailerno').change(function (e) {
        var trailerno = $("#Trailerno").val();
        $.ajax({
            url: "/ManualPortOut/AjaxGetTrailerNo",
            data: '{trailerno: ' + JSON.stringify(trailerno) + '}',
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {

                var select = $("#ddlTrailerNo");
                var select1 = $("#ddlTransporter");

                select.empty();
                select.append($('<option/>', {
                    value: "",
                    text: "--Select--"
                }));

                $.each(data, function (data, value) {
                    //alert(value)
                    select.append($("<option></option>").html(value.trailername));
                    select1.append($("<option></option>").html(value.TransID));

                })



            },

            error: function (errormessage) {
                alert(errormessage.responseText);
            }
        });

    });

    function BookingNo() {

        var BookingNo = $("#txtBookingNo").val();
        var data1 = { 'BookingNo': BookingNo };
        var data = JSON.stringify(data1);
        $.ajax({
            url: '/EyardOut/LorryBooking',
            type: 'Post',
            data: data,
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                $("#ddlShippingLine").val(data[0].cmbline);
                $("#ddlCustomer").val(data[0].cmbagent);
                $("#ddlLocation").val(data[0].cmbfrom);
                $("#ddlToLocation").val(data[0].cmbto);
            },
            error: function (errormessage) {
                alert(errormessage.responseText);
                $("#tracker-loader").fadeOut("slow");
            }
        });
    }

    function ContainerNo() {

        var ddlActivity = document.getElementById('ddlActivity').value;

        if (ddlActivity == 0) {
            document.getElementById("ddlActivity").style.borderColor = "red";
            alert('Activity name cannot be left blank ')
            $("#tracker-loader").fadeOut("slow");
            event.preventDefault();
            return;
        }

        var ContainerNo = $("#txtContainerNo").val();
        var data1 = { 'ContainerNo': ContainerNo };
        var data = JSON.stringify(data1);
        $.ajax({
            url: '/EyardOut/LorryContainer',
            type: 'Post',
            data: data,
            contentType: 'application/json; charset=utf-8',
            success: function (data) {

                $("#ddlActivity").val(data[0].cmbActivity);
                $("#ddlsize").val(data[0].cmbsize);
                $("#ddlType").val(data[0].cmbtype);
                $("#txtAgentSeal").val(data[0].txtagentseal);
                $("#txtWeight").val(data[0].txtwt);
                $("#txtBOENo").val(data[0].txtboeno);

                $("#txtConsignee ").val(data[0].txtconsignee);
                //$("#ddlToLocation").val(data[0].cmbto);
                //$("#ddlLocation").val(data[0].cmbfrom);
                //$("#ddlCustomer").val(data[0].cmbagent);

                $("#ddlShippingLine").val(data[0].cmbline);
                ///$("#ddlCustomer").val(data[0].custo);
            },
            error: function (errormessage) {
                alert(errormessage.responseText);
                $("#tracker-loader").fadeOut("slow");
            }
        });
        //ContainerNos(ContainerNo, AllowID,, BookingNo)
    }


    function ContainerNos(ContainerNo, AllowID, BookingNo) {


        //var ContainerNo = $("#txtContainerNo").val();
        //var AllowID = "0"
        //var BookingNo = $("#txtBookingNo").val();
        var data1 = { 'ContainerNo': ContainerNo, 'AllowID': AllowID, 'BookingNo': BookingNo };
        var data = JSON.stringify(data1);
        if (ddlActivity == "9") {
            $.ajax({
                url: '/EyardOut/LorryContainers',
                type: 'Post',
                data: data,
                contentType: 'application/json; charset=utf-8',
                success: function (data) {

                    $("#ddlActivity").val(data[0].cmbActivity);
                    $("#ddlsize").val(data[0].cmbsize);
                    $("#ddlType").val(data[0].cmbtype);
                    $("#txtAgentSeal").val(data[0].txtagentseal);
                    $("#txtWeight").val(data[0].txtwt);
                    $("#txtBOENo").val(data[0].txtboeno);

                    $("#txtConsignee ").val(data[0].txtconsignee);
                    //$("#ddlToLocation").val(data[0].cmbto);
                    //$("#ddlLocation").val(data[0].cmbfrom);
                    //$("#ddlCustomer").val(data[0].cmbagent);

                    $("#ddlShippingLine").val(data[0].cmbline);
                    ///$("#ddlCustomer").val(data[0].custo);
                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                    $("#tracker-loader").fadeOut("slow");
                }
            });
        }
        else {
            alert("Specified container siz/type/ line mismatch. Cannot proceed");
            return;
        }
    }
    var storeAddedItem = [];
    function Add() {



        var element = {};
        element.ContainerNo = $('#txtContainerNo').val();
        element.Size = $('#ddlsize').val();
        element.Type = $('#ddlType').val();
        element.TrailerNo = $('#ddlTrailerNo').val();
        element.AgentSeal = $('#txtAgentSeal').val();
        element.BookingNo = $('#txtBookingNo').val();
        element.Activity = $('#ddlActivity').val();
        element.FromLocation = $('#ddlLocation').val();
        //$("#txtLineName").val(data[0].LineName);
        //element.TrailerNo = $('#Trailerno'.val();
        element.ToLocation = $('#ddlToLocation').val();
        element.BOENo = $('#txtBOENo').val();
        element.Pkgs = $('#txtPkgs').val();
        element.Weight = $('#txtWeight').val();

        element.TareWeight = $('#txtTareWeight').val();
        element.Commodity = $('#txtCommodity').val();
        element.Remarks = $('#txtRemarks').val();

        //if (element.TrailerNo == "") {
        //    document.getElementById("TrailerNo").style.borderColor = "red";
        //    alert('Please  Enter  From Trailer No!')
        //    event.preventDefault();
        //    return;
        //}
        if (element.Activity == 0) {
            document.getElementById("ddlActivity").style.borderColor = "red";
            alert('Please  Enter  Activity!')
            event.preventDefault();
            return;
        }
        if (element.BookingNo == "") {
            document.getElementById("txtBookingNo").style.borderColor = "red";
            alert('Please  Enter  BK/Tax Invoice No!')
            event.preventDefault();
            return;
        }
        if (element.FromLocation == 0) {
            document.getElementById("ddlLocation").style.borderColor = "red";
            alert('Please  Enter  From Location!')
            event.preventDefault();
            return;
        }
        if (element.ToLocation == 0) {
            document.getElementById("ddlToLocation").style.borderColor = "red";
            alert('Please  Enter  To Location!')
            event.preventDefault();
            return;
        }
        if (element.ContainerNo == "") {
            document.getElementById("txtContainerNo").style.borderColor = "red";
            alert('Please  Enter  Container No!')
            event.preventDefault();
            return;
        }


        if (element.Pkgs == "") {
            document.getElementById("txtPkgs").style.borderColor = "red";
            alert('Please  Enter  Pkgs!')
            event.preventDefault();
            return;
        }

        if (element.Weight == "") {
            document.getElementById("txtWeight").style.borderColor = "red";
            alert('Please  Enter  Weight!')
            event.preventDefault();
            return;
        }
        storeAddedItem.push(element);


        $('#example').DataTable({
            "destroy": true,
            "bLengthChange": false,
            "aaData": storeAddedItem,
            "bPaginate": false,
            "bInfo": false,
            "paging": false,
            "columns": [

                { "data": "ContainerNo" },
                { "data": "Size" },
                { "data": "Type" },
                { "data": "TrailerNo" },
                { "data": "AgentSeal" },
                { "data": "BookingNo" },
                { "data": "Activity" },
                { "data": "FromLocation" },
                { "data": "ToLocation" },
                { "data": "BOENo" },
                { "data": "Pkgs" },
                { "data": "Weight" },
                { "data": "TareWeight" },
                { "data": "Commodity" },
                { "data": "Remarks" }

            ]
        });
    }


     function Save() {
         debugger;

         ///ddlentryType

         var Lrno = $("#txtLrNo").val();
         var LrDate = $("#txtLrDate").val();
         var ShippingLine = $("#ddlShippingLine").val();
         var Customer = $("#ddlCustomer").val();
         var Consignee = $("#txtConsignee").val();
         var Transporter = $("#ddlTransporter").val();


         if (Customer == 0) {
             document.getElementById("ddlCustomer").style.borderColor = "red";
             alert('Please  Enter  Customer Name!')
             event.preventDefault();
             return;
         }

         if (Consignee == "") {
             document.getElementById("txtConsignee").style.borderColor = "red";
             alert('Please  Enter  Consignor Name!')
             event.preventDefault();
             return;
         }

            var SelectedData = new Array();
            var tablearray = new Array();

            var table = document.getElementById("example");

            var row;
            for (var i = 1; i < table.rows.length; i++) {

                row = table.rows[i];
                ContainerNo = row.cells[0].innerText;
                Size = row.cells[1].innerText;
                Type = row.cells[2].innerText;
                TrailerNo = row.cells[3].innerText;
                AgentSeal = row.cells[4].innerText;

                BookingNo = row.cells[5].innerText;
                Activity = row.cells[6].innerText;
                FromLocation = row.cells[7].innerText;
                ToLocation = row.cells[8].innerText;
                BOENo = row.cells[9].innerText;
                Pkgs = row.cells[10].innerText;
                Weight = row.cells[11].innerText;
                TareWeight = row.cells[12].innerText;
                Commodity = row.cells[13].innerText;
                Remarks = row.cells[14].innerText;

                SelectedData.push({
                    'ContainerNo': ContainerNo, 'Size': Size, 'Type': Type, 'TrailerNo': TrailerNo, 'AgentSeal': AgentSeal,
                    'BookingNo': BookingNo, 'Activity': Activity, 'FromLocation': FromLocation, 'ToLocation': ToLocation, 'BOENo': BOENo, 'Pkgs': Pkgs, 'Weight': Weight, 'TareWeight': TareWeight, 'Commodity': Commodity, 'Remarks': Remarks
                })
            }

            var data1 = {
                'Debitdata': SelectedData, 'Lrno': Lrno, 'LrDate': LrDate
            };
            var data = JSON.stringify(data1);


                          $.ajax({
                              url: "/EyardOut/DomesticHubUpdate",
                            data: data,
                            type: "POST",
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                              success: function (data) {
                                  alert(data);
                                  document.location = '@Url.Action("DomestichubLorryReciept", "Eyardout")';
                                  //$("#txtLrNo").val(data[0].Lrno);
                                  //PrintDomesticInvoice();
                            },
                            error: function (errormessage) {
                                alert(errormessage.responseText);
                            }
                        });


    }


    function PrintDomesticInvoice() {

        var data1 = { 'Category': "Lr" };
        data = JSON.stringify(data1);

        var Lrno = $("#txtLrNo").val();
        //var txtWorkDomestic = $("#txtWorkDomestic").val();

        var data1 = { 'Lrno': Lrno };
        data = JSON.stringify(data1);
            $.ajax({
                url: '/Report/GetMuptiplePrintImport',
                type: 'Post',
                data: data,
                async: false,
                contentType: 'application/json; charset=utf-8',
                success: function (response) {
                    var url = response + Lrno;
                    window.open(url, '_blank');
                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                    $("#tracker-loader").fadeOut("slow");
                }
            });
        }



</script>


<div class=" content-area overflow-hidden" id="divView" style="display:none">

    <h4 class="page-title">LR Receipt Report</h4>
    <div class="ibox-content  text-right">
        <a onclick="getBack();" class="btn btn-primary btn-success" style="color:white;align-content:center;"><i class="fa fa-arrow-left" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Back"></i>  </a></li>
    </div>




    <div class="row">
        <div class="col-md-12 col-lg-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">

                        <div class="col-lg-12 col-sm-12">
                            <div class="form-group">
                                <div class="row gutters-xs">

                                    <div class="col-md-2 col-lg-2">
                                        <div class="form-group label-floating">
                                            <label class="form-label">From</label>
                                            @Html.TextBox("FromDate", null, new { @id = "FromDate", @class = "form-control form_datetime1", @Value = DateTime.Now.AddDays(-1).ToString("dd-MMM-yyyy hh:mm") })
                                        </div>
                                    </div>
                                    <div class="col-md-2 col-lg-2">
                                        <div class="form-group label-floating">
                                            <label class="form-label">To</label>
                                            @Html.TextBox("ToDate", null, new { @id = "ToDate", @class = "form-control form_datetime1", @Value = DateTime.Now.ToString("dd-MMM-yyyy hh:mm") })
                                        </div>
                                    </div>

                                    <div class="col-md-2 col-lg-2">
                                        <div class="form-group label-floating">
                                            <label class="form-label">Category</label>
                                            @Html.DropDownList("ddlTypeSearch", (IEnumerable<SelectListItem>)ViewBag.ActivityL, "ALL", new { @class = "form-control custom-select", @id = "ddlTypeSearch", name = "ddlTypeSearch", autocomplete = "off" })
                                        </div>
                                    </div>
                                    <div class="col-md-22 col-lg-2">
                                        <div class="form-group label-floating" style="margin-top: 33px;">
                                            <button class=" btn btn-primary" style="margin-top: -7px" id="btnSearch" onclick="Show('')" type="button">
                                                <i class="fa fa-search"></i>
                                            </button>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>



                    </div>
                    <div class="row">
                        <div class="col-lg-12 col-sm-12 col-xs-12 col-md-12">
                            <div class="input-group">

                                <span class="input-group-append " id="tabPurpose">
                                    <button class="btn btn-success active btn-lg m-0" id="BtnTotal" style="width: 120px !important;font-weight:bold" value="" type="button" onclick="ShowCount('')">Total:  <span id="lbltotal" style="font-weight:bold"></span></button>
                                    <button class="btn btn-success btn-lg m-0" id="Btn20" style="width: 120px !important;font-weight:bold" type="button" onclick="ShowCount('20')">20:  <span id="lbl20" style="font-weight:bold"></span> </button>
                                    <button class="btn btn-success btn-lg m-0" id="Btn40" style="width: 120px !important;font-weight:bold" type="button" onclick="ShowCount('40')">40:  <span id="lbl40" style="font-weight:bold"></span></button>
                                    <button class="btn btn-success btn-lg m-0" id="Btn45" style="width: 120px !important;font-weight:bold" type="button" onclick="ShowCount('45')">45:  <span id="lbl45" style="font-weight:bold"></span></button>
                                    <button class="btn btn-success btn-lg m-0" id="BtnTEUS" style="width: 120px !important;font-weight:bold" type="button" onclick="ShowCount('')">TEUS:  <span id="lblTeus" style="font-weight:bold"></span></button>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-lg-12">
                            <br /><button class="btn btn-orange" id="btnSearch" title="Export To Excel" type="button"><i class="fa fa-file-excel-o" onclick="GetExcelFile()"></i></button>

                            <div class="table-responsive">
                                <table class="table table-bordered table-hover tbl-cart text-nowrap" id="reportTable" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>LR No.</th>
                                            <th>LR Date.</th>
                                            <th>Booking No</th>
                                            <th>Customer Name</th>
                                            <th>Shipping Line</th>
                                            <th>From Location</th>
                                            <th>To Location</th>
                                            <th>Activity</th>
                                            <th>Container No</th>
                                            <th>Size</th>
                                            <th>Type</th>
                                            <th>Vehicle No</th>
                                            <th>Agent Seal</th>
                                            <th>BOE No</th>
                                            <th>Added By</th>
                                            <th>Remarks</th>


                                        </tr>
                                    </thead>
                                    <tbody style="box-sizing :border-box;"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>



            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        $('#reportTable').DataTable({
            "bLengthChange": false,
            "bInfo": false,
            "bPaginate": false,
            //"bFilter": false,
            "paging": false,
            "aoColumnDefs": [
            {
                'bSortable': false,
                'aTargets': [5]
            }
            ]
        });

    });


    $(function () {
        $("#ddlTypeSearch").change(function () {
            if ($("#ddlTypeSearch").val() == "ALL") {
                $("#dvtxtSearch").hide();
            } else {
                $("#dvtxtSearch").show();
            }
        });
    });

    function showView() {

        $("#divView").show();
        $("#DivReceiptGenDet").hide();


    }


    function getBack() {
        $("#divView").hide();
        $("#DivReceiptGenDet").show();
    }

    function Show(type) {
        // var date = document.getElementById("SelectedDate").value;
        var DepartmentID = $("#ddlTypeSearch option:selected").text();
        var FromDate = $("#FromDate").val();
        var ToDate = $("#ToDate").val();
        var Size = type;
        var data1 = { 'FromDate': FromDate, 'category': DepartmentID, 'ToDate': ToDate, 'Size': Size };
        data = JSON.stringify(data1);
        // alert(data);
        $.ajax({

            url: '/EyardOut/GetTrackLorryReceipt',
            type: 'Post',
            data: data,
            async: false,
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                //alert(JSON.stringify(data))
                //alert(data[0].GrandTotal);




                $('#reportTable').dataTable({
                    "destroy": true,
                    "bLengthChange": false,
                    "aaData": data,
                    "bInfo": false,
                    "bPaginate": false,
                    "bFilter": true,
                    "paging": false,
                    "order": [],

                    "columns": [
                        {
                            "data": "LRNo",
                            "render": function (data, type, row, meta) {
                                if (type === 'display') {

                                    data = '<a   href="#" class="btn btn-sm btn-info" title="Print" onclick="PrintLorry(' + row.LRNo + ')"><i class="fa fa-print"></i></a>';
                                }

                                return data;
                            }


                        },
                       { "data": "LRNo" },
                    { "data": "LRDate" },
                    { "data": "BookingNo" },
                    { "data": "AGName" },
                    { "data": "ShippingLine" },
                    { "data": "FromLocation" },
                    { "data": "ToLocation" },
                    { "data": "Activity" },
                   { "data": "ContainerNo" },
                    { "data": "Size" },
                    { "data": "Type" },
                { "data": "VehicleNo" },
                 { "data": "AgentSeal" },
               { "data": "BOENo" },
               { "data": "AddedBy" },
                        { "data": "Remarks" },

                    ],
                });
                var table = document.getElementById("reportTable");
                var row;


                var TotTEUS1 = 0;
                var TotTEUS2 = 0;
                var TotTEUS3 = 0;
                var TotTEUS = 0;
                var Total1 = 0;

                for (var i = 0; i < table.rows.length; i++) {
                    row = table.rows[i];
                    //var Size = row.cells[6].childNodes[1].value;
                    var Size = row.cells[10].innerText;

                    //alert(Size)

                    if (Size == 20) {
                        TotTEUS1 = Number(TotTEUS1) + 1;
                    }
                    if (Size == 40) {
                        TotTEUS2 = Number(TotTEUS2) + 1;
                    }
                    if (Size == 45) {
                        TotTEUS3 = Number(TotTEUS3) + 1;
                    }
                    //TotTEUS = Number(TotTEUS) + Number(size);


                }
                TotTEUS = TotTEUS1 + (TotTEUS2 * 2) + (TotTEUS3 * 2)
                Total1 = TotTEUS1 + (TotTEUS2) + (TotTEUS3)
                // alert(TotTEUS);
                $("#lbltotal").text(Total1);
                $("#lbl20").text(TotTEUS1);
                $("#lbl40").text(TotTEUS2);
                $("#lbl45").text(TotTEUS3);
                $("#lblTeus").text(TotTEUS);



            },
            error: function (errormessage) {
                alert(errormessage.responseText);
            }


        });


    }

    function ShowCount(Size) {
        // var date = document.getElementById("SelectedDate").value;
        var DepartmentID = $("#ddlTypeSearch option:selected").text();
        var FromDate = $("#FromDate").val();
        var ToDate = $("#ToDate").val();

        var data1 = { 'FromDate': FromDate, 'category': DepartmentID, 'ToDate': ToDate, 'Size': Size };
        data = JSON.stringify(data1);
        // alert(data);
        $.ajax({

            url: '/EyardOut/GetTrackLorryReceipt',
            type: 'Post',
            data: data,
            async: false,
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                //alert(JSON.stringify(data))
                //alert(data[0].GrandTotal);




                $('#reportTable').dataTable({
                    "destroy": true,
                    "bLengthChange": false,
                    "aaData": data,
                    "bInfo": false,
                    "bPaginate": false,
                    "bFilter": true,
                    "paging": false,
                    "order": [],

                    "columns": [
                        {
                            "data": "LRNo",
                            "render": function (data, type, row, meta) {
                                if (type === 'display') {

                                    data = '<a   href="#" class="btn btn-sm btn-info" title="Print" onclick="PrintLorry(' + row.LRNo + ')"><i class="fa fa-print"></i></a>';
                                }

                                return data;
                            }


                        },
                        { "data": "LRNo" },
                        { "data": "LRDate" },
                        { "data": "BookingNo" },
                        { "data": "AGName" },
                        { "data": "ShippingLine" },
                        { "data": "FromLocation" },
                        { "data": "ToLocation" },
                        { "data": "Activity" },
                        { "data": "ContainerNo" },
                        { "data": "Size" },
                        { "data": "Type" },
                        { "data": "VehicleNo" },
                        { "data": "AgentSeal" },
                        { "data": "BOENo" },
                        { "data": "AddedBy" },
                        { "data": "Remarks" },

                    ],
                });




            },
            error: function (errormessage) {
                alert(errormessage.responseText);
            }


        });


    }



    function PrintLorry(LRNo) {


        var data1 = { 'LRNo': LRNo };
        var data = JSON.stringify(data1);
        $.ajax({
            url: "/EyardOut/PrintDomesticLorryReceipt",
            data: data,
            type: "POST",
            contentType: "application/json; charset=utf-8",
            // dataType: "json",
            success: function (response) {

                var myWindow = window.open("", "MsgWindow1");
                myWindow.close();
                var myWindow = window.open("", "MsgWindow1");
                myWindow.document.write(response);
            },

            error: function (errormessage) {
                alert(errormessage.responseText);
            }
        });
    }


    function GetExcelFile() {

        window.location = '@Url.Action("ExportToExcelLorryreceiptdetails", "report")?';


    }

</script>
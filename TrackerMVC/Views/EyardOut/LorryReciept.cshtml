
@{
    ViewBag.Title = "LorryReciept";
    Layout = "~/Views/Shared/_LayoutDashboard.cshtml";
}

 

<div class=" content-area overflow-hidden" id="DivReceiptGenDet">
    <div class="page-header">
        <h4 class="page-title">Lorry Reciept</h4>
        <div class="form-group">
            <label class="form-label"></label>
            <div class="row gutters-xs">
                <div class="col">
                    <a href="@Url.Action("LorryReceiptReport", "Report")" type="button" target="_blank" name="summarylist" title="Summary list" id="summarylist" class="btn btn-icon btn-teal" style="color:#780bdb;font-family:-webkit-pictograph"><i class="fa fa-file-text"></i></a>
                    @*<button type="button" class="btn btn-icon btn-success" name="summarylist" title="Summary list" id="summarylist" target="_blank" href="@Url.Action("LorryReceiptReport", "Report")" ><i class="fa fa-file-text"></i></button>*@
                </div>
            </div>
        </div>
    </div>
    

    <div class="row">
        <div class="col-md-12 col-lg-12">
            <div class="card">
                <div class="card-body">


                    <div class="row">
                        <div class="col-lg-3 col-sm-6">
                            <div class="form-group">
                                <label class="form-label">LR No</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtLrNo", null, new { @class = "form-control ", @id = "txtLrNo", name = "txtLrNo", placeholder = "NEW", autocomplete = "off", @readonly = true })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-12">
                            <div class="form-group">
                                <label class="form-label mandatory">LR Date</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtLrDate", null, new { @class = "form-control form_datetime1", @id = "txtLrDate", name = "txtLrDate", @readonly = true, autocomplete = "on", @Value = DateTime.Now.ToString("dd MMM yyyy hh:mm") })

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Activity Name</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                         
                                        @Html.DropDownList("ddlActivity", (IEnumerable<SelectListItem>)ViewBag.ActivityL, "--Select--", new { @class = "form-control", @id = "ddlActivity", name = "ddlActivity", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                       
                    </div>
                    <div class="row">
                        <div class="col-lg-3 col-sm-6">
                            <div class="form-group">
                                <label class="form-label">BK/Tax Invoice No</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtBookingNo", null, new { @class = "form-control ", @id = "txtBookingNo", name = "txtBookingNo", autocomplete = "off", OnChange = "BookingNo()" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Shipping Line</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("ddlShippingLine", (IEnumerable<SelectListItem>)ViewBag.LineName, "--Select--", new { @class = "form-control", @id = "ddlShippingLine", name = "ddlShippingLine", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <div class="form-group">
                                <label class="form-label">Customer Name</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("ddlCustomer", (IEnumerable<SelectListItem>)ViewBag.Customer, "--Select--", new { @class = "form-control", @id = "ddlCustomer", name = "ddlCustomer", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-6" style="display:none">
                            <div class="form-group">
                                <label class="form-label">Container Count</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        <select class="form-control" id="ddlContainerCount"></select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">

                        <div class="col-lg-3 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">From Location</label>
                                <div class="row gutters-xs">
                                    <div class="col">

                                        @Html.DropDownList("ddlLocation", (IEnumerable<SelectListItem>)ViewBag.Location, "--Select--", new { @class = "form-control", @id = "ddlLocation", name = "ddlLocation", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-3 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">To Location</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("ddlToLocation", (IEnumerable<SelectListItem>)ViewBag.Location, "--Select--", new { @class = "form-control", @id = "ddlToLocation", name = "ddlToLocation", autocomplete = "off" })

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <div class="form-group">
                                <label class="form-label">E-Way Bill No</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtEWayBillNo", null, new { @class = "form-control ", @id = "txtEWayBillNo", name = "txtEWayBillNo", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-3 col-sm-6">
                            <div class="form-group">
                                <label class="form-label">Container/Batch No</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtContainerNo", null, new { @class = "form-control ", @id = "txtContainerNo", name = "txtContainerNo", autocomplete = "off", OnChange = "ContainerNo()" })
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="col-lg-2 col-sm-6">
                            <div class="form-group">
                                <label class="form-label">Type</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("ddlType", (IEnumerable<SelectListItem>)ViewBag.Type, "--Select--", new { @class = "form-control", @id = "ddlType", name = "ddlType", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-1 col-sm-6">
                            <div class="form-group">
                                <label class="form-label">Size</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        <select class="form-control" id="ddlsize">
                                            <option value="0">--Select--</option>
                                            <option value="20">20</option>
                                            <option value="40">40</option>
                                            <option value="45">45</option>

                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-3 col-sm-6">
                            <div class="form-group">
                                <label class="form-label">Cargo Descriptions</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtCoilSizeDescriptions", null, new { @class = "form-control ", @id = "txtCoilSizeDescriptions", name = "txtCoilSizeDescriptions", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-3 col-sm-12">
                            <div class="form-group">
                                <label class="form-label mandatory">Trailer No(Last 4 digits)</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtTrailerno", null, new { @class = "form-control", @id = "Trailerno", name = "Trailerno", autocomplete = "off", placeholder = "Trailer No", @maxlength = 4 })
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-3 col-sm-12" id="divtrailernodrop">
                            <label class="form-label">Trailer No </label>
                            <select id="ddlTrailerNo" class="form-control">
                                <option value="">--Select--</option>
                            </select>
                        </div>
                        <div class="col-lg-3 col-sm-6">

                            <div class="form-group">
                                <label class="form-label">Transporter </label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.DropDownList("ddlTransporter", (IEnumerable<SelectListItem>)ViewBag.Transporter, "--Select--", new { @class = "form-control", @id = "ddlTransporter", name = "ddlTransporter", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>
                    <div class="row">

                        <div class="col-lg-2 col-sm-6">
                            <div class="form-group">
                                <label class="form-label">Agent Seal</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtAgentSeal", null, new { @class = "form-control ", @id = "txtAgentSeal", name = "txtAgentSeal", autocomplete = "off" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-sm-6">

                            <div class="form-group">
                                <label class="form-label">BOE No</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtBOENo", null, new { @class = "form-control ", @id = "txtBOENo", name = "txtBOENo", autocomplete = "off" })
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="col-lg-2 col-sm-6">

                            <div class="form-group">
                                <label class="form-label">PKGS</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtPkgs", null, new { @class = "form-control ", @id = "txtPkgs", name = "txtPkgs", autocomplete = "off" })
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="col-lg-2 col-sm-6">

                            <div class="form-group">
                                <label class="form-label">Weight(MTS)</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtWeight", null, new { @class = "form-control ", @id = "txtWeight", name = "txtWeight", autocomplete = "off" })
                                    </div>
                                </div>

                            </div>
                        </div>
                       
                    </div>
                    <div class="row">
                      
                    </div>
                    <div class="row">
                        <div class="col-lg-2 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Tare Weigth</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtTareWeight", null, new { @class = "form-control ", @id = "txtTareWeight", name = "txtTareWeight", autocomplete = "off" })
                                        @*@Html.DropDownList("ddlentryType", (IEnumerable<SelectListItem>)ViewBag.EntryType, "--Select--", new { @class = "form-control", @id = "ddlentryType", name = "ddlentryType", autocomplete = "off" })*@
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-sm-6">

                            <div class="form-group">
                                <label class="form-label">Consignor Name</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtConsignee", null, new { @class = "form-control ", @id = "txtConsignee", name = "txtConsignee", autocomplete = "off" })
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="col-lg-2 col-sm-6">

                            <div class="form-group">
                                <label class="form-label">Train No</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtTrainNo", null, new { @class = "form-control ", @id = "txtTrainNo", name = "txtWeight", autocomplete = "off" })
                                    </div>
                                </div>

                            </div>
                        </div>



                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-sm-7">

                            <div class="form-group">
                                <label class="form-label">Commodity</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtCommodity", null, new { @class = "form-control ", @id = "txtCommodity", name = "txtCommodity", autocomplete = "off" })
                                    </div>
                                </div>

                            </div>
                        </div>
                        


                    </div>

                    <div class="row">
                        <div class="col-lg-6 col-sm-7">

                            <div class="form-group">
                                <label class="form-label">Remarks</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        @Html.TextBox("txtRemarks", null, new { @class = "form-control ", @id = "txtRemarks", name = "txtRemarks", autocomplete = "off" })
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="col-lg-1 col-sm-12">
                            <div class="form-group">
                                <label class="form-label" style="visibility:hidden">.</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        <button id="btnSave" class="btn btn-success btn-xs" onclick="return Add();">Add</button>
                                        @*<button class="btn btn-success " type="button" id="savedetails" onclick="return Add();">Add</button>*@
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-lg-12">
                            <div>
                                @*<label class="form-label">Details </label>*@
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped table-bordered" id="example" style="width:100%">
                                    <thead>
                                        <tr>

                                            <th class="wd-15p sorting">Container No</th>
                                            <th class="wd-15p sorting">Size</th>
                                            <th class="wd-15p sorting">Type</th>
                                            <th class="wd-15p sorting">Vehicle No</th>
                                            <th class="wd-15p sorting">Agent Seal</th>
                                            <th class="wd-15p sorting">Booking No</th>
                                            <th class="wd-15p sorting">Activity</th>
                                            <th class="wd-15p sorting">From Location</th>
                                            <th class="wd-10p sorting">To Location</th>
                                            <th class="wd-10p sorting">BOE No</th>
                                            <th class="wd-10p sorting">Pkgs</th>
                                            <th class="wd-10p sorting">Weigth</th>
                                            <th class="wd-10p sorting">Tare Weight</th>
                                            <th class="wd-10p sorting">Commodity</th>
                                            <th class="wd-10p sorting">Remarks</th>
                                            <th class="wd-10p sorting">E-Way Bill No</th>
                                            <th class="wd-10p sorting">Coil Size Descriptions</th>
                                            <th class="wd-10p sorting">Train No</th>

                                            @*<th type="hidden"></th>*@


                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-sm-12" style="display:none">
                        <div class="form-group">
                            <label class="form-label mandatory">Debit in Account</label>
                            <div class="row gutters-xs">
                                <div class="col">
                                    <input type="text" class="form-control" id="TxtEntryID" />
                                    <input type="hidden" class="form-control" id="lblTypeID" />
                                    <input type="hidden" class="form-control" id="txtForwarderLine" />
                                    <input type="hidden" class="form-control" id="lbllineid" />
                                    <input type="text" class="form-control" id="lblcusto" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label class="form-label" style="visibility:hidden">.</label>
                                <div class="row gutters-xs">
                                    <div class="col">
                                        <button class="btn btn-success " type="button" id="btnSave" onclick="return Save();">Save</button>
                                        <button type="button" class="btn btn-icon btn-gray" name="clearProfile" title="clear" id="btnclearValue">Clear</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>


</div>

<script>
    $(window).on("load", function (e) {
        $("#tracker-loader").fadeOut("slow");
        $("#ddlActivity").val(58);
        $("#ddlLocation").val(292);
    })
    $('#Trailerno').change(function (e) {
        var trailerno = $("#Trailerno").val();
        $.ajax({
            url: "/ManualPortOut/AjaxGetTrailerNo",
            data: '{trailerno: ' + JSON.stringify(trailerno) + '}',
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                debugger;
                var select = $("#ddlTrailerNo");
                var select1 = $("#ddlTransporter");

                select.empty();
                select.append($('<option/>', {
                    value: "",
                    text: "--Select--"
                }));

                $.each(data, function (data, value) {
                    //alert(value)
                    select.append($("<option></option>").html(value.trailername));
                    select1.append($("<option></option>").html(value.TransID));

                })



            },

            error: function (errormessage) {
                alert(errormessage.responseText);
            }
        });

    });

    function BookingNo() {
        debugger;
        var BookingNo = $("#txtBookingNo").val();
        var data1 = { 'BookingNo': BookingNo };
        var data = JSON.stringify(data1);
        $.ajax({
            url: '/EyardOut/LorryBooking',
            type: 'Post',
            data: data,
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                $("#ddlShippingLine").val(data[0].cmbline);
                $("#ddlCustomer").val(data[0].cmbagent);
                $("#ddlLocation").val(data[0].cmbfrom);
                $("#ddlToLocation").val(data[0].cmbto);
            },
            error: function (errormessage) {
                alert(errormessage.responseText);
                $("#tracker-loader").fadeOut("slow");
            }
        });
    }

    function ContainerNo() {
        debugger;
        var ddlActivity = document.getElementById('ddlActivity').value;

        if (ddlActivity == 0) {
            document.getElementById("ddlActivity").style.borderColor = "red";
            alert('Activity name cannot be left blank ')
            $("#tracker-loader").fadeOut("slow");
            event.preventDefault();
            return;
        }

        var ContainerNo = $("#txtContainerNo").val();
        var data1 = { 'ContainerNo': ContainerNo, 'ddlActivity': ddlActivity };
        var data = JSON.stringify(data1);
        $.ajax({
            url: '/EyardOut/LorryContainer',
            type: 'Post',
            data: data,
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                debugger;
                if (data !== "") {
                    $("#ddlActivity").val(data[0].cmbActivity);
                    $("#txtCoilSizeDescriptions").val(data[0].cmbsize);

                
                     
                    $("#ddlsize").val(data[0].cmbsize1);
                     


                    $("#ddlType").val(data[0].cmbtype);
                    $("#txtAgentSeal").val(data[0].txtagentseal);
                    $("#txtWeight").val(data[0].txtwt);
                    $("#txtBOENo").val(data[0].txtboeno);

                    $("#txtConsignee ").val(data[0].txtconsignee);
                    $("#txtCommodity").val(data[0].Commodity);
                    $("#txtBookingNo").val(data[0].ComInvoiceNo);
                    $("#ddlCustomer").val(data[0].cmbagent);

                    $("#ddlShippingLine").val(data[0].cmbline);
                    $("#txtPkgs").val(data[0].BatchPkgs);
                    $("#txtTrainNo").val(data[0].TrainNo);
                }
            },
            error: function (errormessage) {
                alert(errormessage.responseText);
                $("#tracker-loader").fadeOut("slow");
            }
        });
        //ContainerNos(ContainerNo, AllowID,, BookingNo)
    }


    function ContainerNos(ContainerNo, AllowID, BookingNo) {
        debugger;
       
        //var ContainerNo = $("#txtContainerNo").val();
        //var AllowID = "0"
        //var BookingNo = $("#txtBookingNo").val();
        var data1 = { 'ContainerNo': ContainerNo, 'AllowID': AllowID, 'BookingNo': BookingNo };
        var data = JSON.stringify(data1);
        if (ddlActivity == "9") {
            $.ajax({
                url: '/EyardOut/LorryContainers',
                type: 'Post',
                data: data,
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    debugger;
                    $("#ddlActivity").val(data[0].cmbActivity);
                    $("#ddlsize").val(data[0].cmbsize);
                    $("#ddlType").val(data[0].cmbtype);
                    $("#txtAgentSeal").val(data[0].txtagentseal);
                    $("#txtWeight").val(data[0].txtwt);
                    $("#txtBOENo").val(data[0].txtboeno);

                    $("#txtConsignee ").val(data[0].txtconsignee);
                    //$("#ddlToLocation").val(data[0].cmbto);
                    //$("#ddlLocation").val(data[0].cmbfrom);
                    //$("#ddlCustomer").val(data[0].cmbagent);

                    $("#ddlShippingLine").val(data[0].cmbline);
                    ///$("#ddlCustomer").val(data[0].custo);
                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                    $("#tracker-loader").fadeOut("slow");
                }
            });
        }
        else {
            alert("Specified container siz/type/ line mismatch. Cannot proceed");
            return;
        }
    }
    var storeAddedItem = [];
    function Add() {
        debugger;


        var element = {};
        element.ContainerNo = $('#txtContainerNo').val();
        element.Size = $('#ddlsize').val();
        element.Type = $('#ddlType').val();
        element.TrailerNo = $('#ddlTrailerNo').val();
        element.AgentSeal = $('#txtAgentSeal').val();
        element.BookingNo = $('#txtBookingNo').val();
        element.Activity = $('#ddlActivity').val();
        element.FromLocation = $('#ddlLocation').val();
        //$("#txtLineName").val(data[0].LineName);
        //element.TrailerNo = $('#Trailerno'.val();
        element.ToLocation = $('#ddlToLocation').val();
        element.BOENo = $('#txtBOENo').val();
        element.Pkgs = $('#txtPkgs').val();
        element.Weight = $('#txtWeight').val();

        element.TareWeight = $('#txtTareWeight').val();
        element.Commodity = $('#txtCommodity').val();
        element.Remarks = $('#txtRemarks').val();
        element.EWayBillNo = $('#txtEWayBillNo').val();
        element.CoilSizeDescriptions = $('#txtCoilSizeDescriptions').val();
        element.TrainNo = $('#txtTrainNo').val();
         
        //if (element.TrailerNo == "") {
        //    document.getElementById("TrailerNo").style.borderColor = "red";
        //    alert('Please  Enter  From Trailer No!')
        //    event.preventDefault();
        //    return;
        //}
        if (element.Activity == 0 || element.Activity == "--Select--" || element.Activity == "" ) {
            document.getElementById("ddlActivity").style.borderColor = "red";
            alert('Please  Enter  Activity!')
            event.preventDefault();
            return;
        }

        if (element.TrailerNo == 0 || element.TrailerNo == "--Select--" || element.TrailerNo == "") {
            document.getElementById("ddlTrailerNo").style.borderColor = "red";
            alert('Please  Enter  Trailer No!')
            event.preventDefault();
            return;
        }

        if (element.BookingNo == "") {
            document.getElementById("txtBookingNo").style.borderColor = "red";
            alert('Please  Enter  BK/Tax Invoice No!')
            event.preventDefault();
            return;
        }
        if (element.FromLocation == 0) {
            document.getElementById("ddlLocation").style.borderColor = "red";
            alert('Please  Enter  From Location!')
            event.preventDefault();
            return;
        }
        if (element.ToLocation == 0) {
            document.getElementById("ddlToLocation").style.borderColor = "red";
            alert('Please  Enter  To Location!')
            event.preventDefault();
            return;
        }
        if (element.ContainerNo == "") {
            document.getElementById("txtContainerNo").style.borderColor = "red";
            alert('Please  Enter  Container No!')
            event.preventDefault();
            return;
        }


        if (element.Pkgs == "") {
            document.getElementById("txtPkgs").style.borderColor = "red";
            alert('Please  Enter  Pkgs!')
            event.preventDefault();
            return;
        }

        if (element.Weight == "") {
            document.getElementById("txtWeight").style.borderColor = "red";
            alert('Please  Enter  Weight!')
            event.preventDefault();
            return;
        }
        storeAddedItem.push(element);

        var checkExpensesHead = $("#txtContainerNo").val();
        var checkExpensesHead1 = checkExpensesHead.toString(50);
       
        var exists = $('#example tr > td:contains(' + checkExpensesHead1 + ')').length;



        if (exists == 1) {

            alert("Container or Batch no already exist!");
            element.ContainerNo == ""
            event.preventDefault();
            return;
        }
        else {
        $('#example').DataTable({
            "destroy": true,
            "bLengthChange": false,
            "aaData": storeAddedItem,
            "bPaginate": false,
            "bInfo": false,
            "paging": false,
            "columns": [

                { "data": "ContainerNo" },
                { "data": "Size" },
                { "data": "Type" },
                { "data": "TrailerNo" },
                { "data": "AgentSeal" },
                { "data": "BookingNo" },
                { "data": "Activity" },
                { "data": "FromLocation" },
                { "data": "ToLocation" },
                { "data": "BOENo" },
                { "data": "Pkgs" },
                { "data": "Weight" },
                { "data": "TareWeight" },
                { "data": "Commodity" },
                { "data": "Remarks" },
                 { "data": "EWayBillNo" },
                { "data": "CoilSizeDescriptions" },
                { "data": "TrainNo" }
            ]
        });
    }
    }


     function Save() {
       
         $('#btnSave').attr('disabled', 'disabled');
         debugger;
         ///ddlentryType
         var Lrno = "0"
         var LrDate = $("#txtLrDate").val();
         var ShippingLine = $("#ddlShippingLine").val();
         var Customer = $("#ddlCustomer").val();
         var Consignee = $("#txtConsignee").val();
         var Transporter = $("#ddlTransporter").val();

         
         if (Customer == 0) {
             document.getElementById("ddlCustomer").style.borderColor = "red";
             alert('Please  Enter  Customer Name!')
             event.preventDefault();
             return;
         }

         if (Consignee == "") {
             document.getElementById("txtConsignee").style.borderColor = "red";
             alert('Please  Enter  Consignor Name!')
             event.preventDefault();
             return;
         }
         $('#btnSave').attr('disabled', 'disabled');
            var SelectedData = new Array();
            var tablearray = new Array();

            var table = document.getElementById("example");

            var row;
            for (var i = 1; i < table.rows.length; i++) {

                row = table.rows[i];
                ContainerNo = row.cells[0].innerText;
                Size = row.cells[1].innerText;
                Type = row.cells[2].innerText;
                TrailerNo = row.cells[3].innerText;
                AgentSeal = row.cells[4].innerText;
                
                BookingNo = row.cells[5].innerText;
                Activity = row.cells[6].innerText;
                FromLocation = row.cells[7].innerText;
                ToLocation = row.cells[8].innerText;
                BOENo = row.cells[9].innerText;
                Pkgs = row.cells[10].innerText;
                Weight = row.cells[11].innerText;
                TareWeight = row.cells[12].innerText;
                Commodity = row.cells[13].innerText;
                Remarks = row.cells[14].innerText;
                EWayBillNo = row.cells[15].innerText;
                CoilSizeDescriptions = row.cells[16].innerText;
                TrainNo = row.cells[17].innerText;
                SelectedData.push({
                    'ContainerNo': ContainerNo, 'Size': Size, 'Type': Type, 'TrailerNo': TrailerNo, 'AgentSeal': AgentSeal,
                    'BookingNo': BookingNo, 'Activity': Activity, 'FromLocation': FromLocation, 'ToLocation': ToLocation, 'BOENo': BOENo, 'Pkgs': Pkgs,
                    'Weight': Weight, 'TareWeight': TareWeight, 'Commodity': Commodity, 'Remarks': Remarks, 'EWayBillNo': EWayBillNo, 'CoilSizeDescriptions': CoilSizeDescriptions, 'TrainNo': TrainNo
                })
            }

            var data1 = {
                'Debitdata': SelectedData, 'Lrno': Lrno, 'LrDate': LrDate, 'ShippingLine': ShippingLine, 'Customer': Customer, 'Consignee': Consignee,
                'Transporter': Transporter
            };
         var data = JSON.stringify(data1);
         $('#btnSave').attr('disabled', 'disabled');
 

                          $.ajax({
                              url: "/EyardOut/SavePartyDebitEntryDetails",
                            data: data,
                            type: "POST",
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                              success: function (data) {
                                  //alert(data);
                                  $('#btnSave').removeAttr('disabled', 'disabled');
                                  var array = data.split(',');
                                  var b = array[0];
                                  var c = parseInt(array[1]);
                                  
                                  alert(b);
                                  PrintDomesticInvoice(c)
                                
                                  document.location = '@Url.Action("LorryReciept", "Eyardout")';
                                 
                            },
                            error: function (errormessage) {
                                alert(errormessage.responseText);
                            }
                        });
 
         
    }


    function PrintDomesticInvoice(Lrno) {
        debugger;
        var data1 = { 'Category': "Lr" };
        data = JSON.stringify(data1);

      
            $.ajax({
                url: '/Report/GetMuptiplePrintImport',
                type: 'Post',
                data: data,
                async: false,
                contentType: 'application/json; charset=utf-8',
                success: function (response) {
                    var url = response + Lrno;
                    window.open(url, '_blank');
                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                    $("#tracker-loader").fadeOut("slow");
                }
            });
        }
   
     

</script>